<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vegan Nutrition Calculator | Abbaya Tahini</title>
  <meta name="description" content="Free vegan nutrition calculator. Check if your meal has all essential amino acids, vitamins, minerals and healthy fats.">
  <link rel="canonical" href="https://abbayatahini.com/nutrition-calculator.html">

  <meta property="og:title" content="Vegan Nutrition Calculator | Abbaya Tahini">
  <meta property="og:description" content="Check if your vegan meal is nutritionally complete. Free tool for plant-based nutrition.">
  <meta property="og:url" content="https://abbayatahini.com/nutrition-calculator.html">

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <!-- html2canvas for export -->
  <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>

  <link rel="stylesheet" href="assets/css/main.css">

  <style>
    /* ========================================
       DESIGN SYSTEM
    ======================================== */
    :root {
      --gold: #C4A35A;
      --gold-light: #E8D5A3;
      --gold-dark: #9A7B3A;
      --brown: #5C4033;
      --brown-dark: #2C1810;
      --cream: #FDF8F0;
      --white: #FFFFFF;
      --text: #2C1810;
      --text-muted: #7A6B5A;
      --success: #4CAF50;
      --warning: #FF9800;
      --danger: #E53935;
      --info: #2196F3;

      --shadow-card: 0 4px 24px rgba(44, 24, 16, 0.08);
      --shadow-hover: 0 8px 32px rgba(44, 24, 16, 0.12);
      --shadow-focus: 0 0 0 3px rgba(196, 163, 90, 0.4);

      --radius-sm: 8px;
      --radius-md: 12px;
      --radius-lg: 16px;
      --radius-full: 9999px;

      --transition: 0.2s ease;
    }

    /* Dark Mode */
    [data-theme="dark"] {
      --cream: #1a1a2e;
      --white: #16213e;
      --text: #e8e8e8;
      --text-muted: #a0a0b0;
      --gold-light: #3a3520;
      --brown: #C4A35A;
      --brown-dark: #0f0f1a;
      --shadow-card: 0 4px 24px rgba(0, 0, 0, 0.3);
      --shadow-hover: 0 8px 32px rgba(0, 0, 0, 0.4);
    }

    [data-theme="dark"] .calc-hero {
      background: linear-gradient(135deg, #0f0f1a 0%, #1a1a2e 100%);
    }

    [data-theme="dark"] .ingredient-card {
      background: #1e1e3a;
    }

    [data-theme="dark"] .ingredient-card.selected {
      background: rgba(196, 163, 90, 0.15);
    }

    [data-theme="dark"] .section-header {
      background: #1e1e3a;
    }

    [data-theme="dark"] .search-box input {
      background: #1e1e3a;
      color: var(--text);
    }

    [data-theme="dark"] .compare-select {
      background: #1e1e3a;
      color: var(--text);
    }

    [data-theme="dark"] .nutrient-bar .bar-track {
      background: #1e1e3a;
    }

    [data-theme="dark"] .calorie-card {
      background: linear-gradient(135deg, var(--gold-dark) 0%, #2C1810 100%);
    }

    [data-theme="dark"] .suggestions-card {
      background: linear-gradient(135deg, #1e1e3a 0%, #2a2a4a 100%);
    }

    [data-theme="dark"] .serving-control {
      background: #1e1e3a;
    }

    [data-theme="dark"] .selected-item {
      background: #1e1e3a;
    }

    [data-theme="dark"] .chart-container {
      background: #1e1e3a;
    }

    [data-theme="dark"] .meal-bar {
      background: #16213e;
    }

    [data-theme="dark"] .modal-content {
      background: #16213e;
    }

    /* ========================================
       ANIMATIONS
    ======================================== */
    @keyframes slideInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes slideInDown {
      from { opacity: 0; transform: translateY(-20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    @keyframes scaleIn {
      from { opacity: 0; transform: scale(0.8); }
      to { opacity: 1; transform: scale(1); }
    }

    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
      20%, 40%, 60%, 80% { transform: translateX(4px); }
    }

    @keyframes slideInRight {
      from { opacity: 0; transform: translateX(20px); }
      to { opacity: 1; transform: translateX(0); }
    }

    .animate-in {
      animation: slideInUp 0.3s ease forwards;
    }

    .animate-fade {
      animation: fadeIn 0.3s ease forwards;
    }

    .animate-scale {
      animation: scaleIn 0.2s ease forwards;
    }

    .animate-shake {
      animation: shake 0.5s ease;
    }

    /* ========================================
       BASE STYLES
    ======================================== */
    .calc-app {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--cream);
      min-height: 100vh;
      color: var(--text);
      line-height: 1.5;
      transition: background 0.3s ease, color 0.3s ease;
    }

    .calc-app * {
      box-sizing: border-box;
    }

    /* ========================================
       TOP BAR (Lang + Theme + Undo)
    ======================================== */
    .top-bar {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      z-index: 1000;
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 0.5rem;
      padding: 0.75rem 1rem;
      background: var(--brown-dark);
      backdrop-filter: blur(10px);
    }

    .top-bar-btn {
      padding: 0.5rem 1rem;
      border: none;
      background: transparent;
      color: var(--white);
      font-size: 0.875rem;
      font-weight: 500;
      cursor: pointer;
      border-radius: var(--radius-full);
      transition: all var(--transition);
      font-family: inherit;
      display: flex;
      align-items: center;
      gap: 0.375rem;
    }

    .top-bar-btn:hover {
      background: rgba(255,255,255,0.1);
    }

    .top-bar-btn.active {
      background: var(--gold);
      color: var(--brown-dark);
    }

    .top-bar-btn:disabled {
      opacity: 0.4;
      cursor: not-allowed;
    }

    .top-bar-divider {
      width: 1px;
      height: 24px;
      background: rgba(255,255,255,0.2);
    }

    /* ========================================
       HERO SECTION
    ======================================== */
    .calc-hero {
      background: linear-gradient(135deg, var(--brown-dark) 0%, var(--brown) 100%);
      color: var(--white);
      padding: 4.5rem 1.5rem 2rem;
      text-align: center;
    }

    .calc-hero h1 {
      font-size: 1.75rem;
      font-weight: 700;
      margin: 0 0 0.5rem 0;
      animation: slideInDown 0.5s ease;
    }

    .calc-hero p {
      font-size: 1rem;
      opacity: 0.9;
      margin: 0 0 1.5rem 0;
      animation: fadeIn 0.5s ease 0.2s both;
    }

    .stats-bar {
      display: flex;
      justify-content: center;
      gap: 2rem;
      flex-wrap: wrap;
      animation: slideInUp 0.5s ease 0.3s both;
    }

    .stat-item { text-align: center; }

    .stat-value {
      font-size: 1.75rem;
      font-weight: 700;
      color: var(--gold);
      transition: all 0.3s ease;
    }

    .stat-label {
      font-size: 0.75rem;
      opacity: 0.8;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }

    /* ========================================
       PERSONALIZATION BAR
    ======================================== */
    .personalization-bar {
      background: var(--white);
      border-bottom: 1px solid var(--gold-light);
      padding: 0.75rem 1.5rem;
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 1rem;
      align-items: center;
      font-size: 0.875rem;
    }

    .personalization-bar label {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--text-muted);
      font-weight: 500;
    }

    .personalization-bar select,
    .personalization-bar input[type="number"] {
      padding: 0.375rem 0.75rem;
      border: 1.5px solid var(--gold-light);
      border-radius: var(--radius-sm);
      font-size: 0.875rem;
      font-family: inherit;
      background: var(--white);
      color: var(--text);
      transition: border-color var(--transition);
    }

    .personalization-bar select:focus,
    .personalization-bar input:focus {
      outline: none;
      border-color: var(--gold);
    }

    .personalization-bar input[type="number"] {
      width: 70px;
    }

    /* ========================================
       MEAL SLOTS
    ======================================== */
    .meal-slots {
      display: flex;
      justify-content: center;
      gap: 0.5rem;
      padding: 1rem 1.5rem;
      background: var(--white);
      border-bottom: 1px solid var(--gold-light);
      flex-wrap: wrap;
    }

    .meal-slot-btn {
      padding: 0.625rem 1.25rem;
      border: 2px solid var(--gold-light);
      background: var(--white);
      color: var(--text);
      border-radius: var(--radius-full);
      font-size: 0.875rem;
      font-weight: 500;
      font-family: inherit;
      cursor: pointer;
      transition: all var(--transition);
      display: flex;
      align-items: center;
      gap: 0.375rem;
    }

    .meal-slot-btn:hover {
      border-color: var(--gold);
      background: var(--cream);
    }

    .meal-slot-btn.active {
      background: var(--gold);
      border-color: var(--gold);
      color: var(--white);
    }

    .meal-slot-btn .slot-count {
      background: rgba(255,255,255,0.3);
      padding: 0.125rem 0.5rem;
      border-radius: var(--radius-full);
      font-size: 0.75rem;
    }

    .meal-slot-btn.active .slot-count {
      background: rgba(255,255,255,0.3);
    }

    .meal-slot-btn:not(.active) .slot-count {
      background: var(--cream);
      color: var(--text-muted);
    }

    /* ========================================
       MAIN LAYOUT
    ======================================== */
    .calc-container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 1.5rem;
    }

    .calc-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 1.5rem;
    }

    @media (min-width: 1024px) {
      .calc-grid { grid-template-columns: 1fr 1fr; }
    }

    @media (min-width: 1280px) {
      .calc-grid { grid-template-columns: 1fr 1fr 380px; }
    }

    /* ========================================
       PANELS
    ======================================== */
    .calc-panel {
      background: var(--white);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow-card);
      overflow: hidden;
      transition: box-shadow var(--transition), background var(--transition);
    }

    .panel-header {
      padding: 1.25rem 1.5rem;
      border-bottom: 1px solid rgba(196, 163, 90, 0.2);
      display: flex;
      justify-content: space-between;
      align-items: center;
      flex-wrap: wrap;
      gap: 0.5rem;
    }

    .panel-header h2 {
      font-size: 1.125rem;
      font-weight: 600;
      margin: 0;
      color: var(--text);
    }

    .panel-header-actions {
      display: flex;
      gap: 0.5rem;
      align-items: center;
    }

    .panel-body {
      padding: 1.5rem;
    }

    /* ========================================
       VIEW TOGGLE
    ======================================== */
    .view-toggle {
      display: flex;
      gap: 0.25rem;
      background: var(--cream);
      padding: 0.25rem;
      border-radius: var(--radius-full);
    }

    .view-toggle button {
      padding: 0.5rem 1rem;
      border: none;
      background: transparent;
      color: var(--text-muted);
      font-size: 0.8125rem;
      font-weight: 500;
      cursor: pointer;
      border-radius: var(--radius-full);
      transition: all var(--transition);
      font-family: inherit;
    }

    .view-toggle button:hover { color: var(--text); }

    .view-toggle button.active {
      background: var(--white);
      color: var(--text);
      box-shadow: var(--shadow-card);
    }

    /* ========================================
       SEARCH BOX
    ======================================== */
    .search-box {
      position: relative;
      margin-bottom: 1rem;
    }

    .search-box svg {
      position: absolute;
      left: 1rem;
      top: 50%;
      transform: translateY(-50%);
      width: 20px;
      height: 20px;
      color: var(--text-muted);
    }

    .search-box input {
      width: 100%;
      padding: 0.875rem 1rem 0.875rem 2.75rem;
      border: 2px solid var(--gold-light);
      border-radius: var(--radius-md);
      font-size: 1rem;
      font-family: inherit;
      background: var(--white);
      color: var(--text);
      transition: border-color var(--transition), box-shadow var(--transition);
    }

    .search-box input:focus {
      outline: none;
      border-color: var(--gold);
      box-shadow: var(--shadow-focus);
    }

    .search-box input::placeholder { color: var(--text-muted); }

    /* API Search Results */
    .api-search-results {
      position: absolute;
      top: 100%;
      left: 0;
      right: 0;
      background: var(--white);
      border: 2px solid var(--gold);
      border-top: none;
      border-radius: 0 0 var(--radius-md) var(--radius-md);
      max-height: 300px;
      overflow-y: auto;
      z-index: 50;
      display: none;
      box-shadow: var(--shadow-hover);
    }

    .api-search-results.visible { display: block; }

    .api-result-item {
      padding: 0.75rem 1rem;
      cursor: pointer;
      border-bottom: 1px solid var(--gold-light);
      display: flex;
      justify-content: space-between;
      align-items: center;
      transition: background var(--transition);
      font-size: 0.875rem;
    }

    .api-result-item:hover { background: var(--cream); }

    .api-result-item:last-child { border-bottom: none; }

    .api-result-item .api-badge {
      background: var(--info);
      color: white;
      padding: 0.125rem 0.5rem;
      border-radius: var(--radius-full);
      font-size: 0.6875rem;
      font-weight: 600;
    }

    .api-loading {
      padding: 1rem;
      text-align: center;
      color: var(--text-muted);
      font-size: 0.875rem;
    }

    /* ========================================
       CATEGORY PILLS
    ======================================== */
    .category-pills {
      display: flex;
      gap: 0.5rem;
      overflow-x: auto;
      padding-bottom: 0.5rem;
      margin-bottom: 1rem;
      scrollbar-width: none;
      -ms-overflow-style: none;
    }

    .category-pills::-webkit-scrollbar { display: none; }

    .category-pill {
      flex-shrink: 0;
      padding: 0.625rem 1rem;
      border: 2px solid var(--gold-light);
      background: var(--white);
      color: var(--text);
      border-radius: var(--radius-full);
      font-size: 0.875rem;
      font-weight: 500;
      font-family: inherit;
      cursor: pointer;
      transition: all var(--transition);
      min-height: 44px;
    }

    .category-pill:hover {
      background: var(--cream);
      border-color: var(--gold);
    }

    .category-pill.active {
      background: var(--gold);
      border-color: var(--gold);
      color: var(--white);
    }

    /* ========================================
       INGREDIENT GRID
    ======================================== */
    .ingredient-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 0.75rem;
      max-height: 400px;
      overflow-y: auto;
      padding-right: 0.5rem;
    }

    @media (min-width: 600px) {
      .ingredient-grid { grid-template-columns: repeat(3, 1fr); }
    }

    @media (min-width: 1024px) {
      .ingredient-grid { grid-template-columns: repeat(2, 1fr); }
    }

    .ingredient-grid::-webkit-scrollbar { width: 6px; }
    .ingredient-grid::-webkit-scrollbar-track { background: var(--cream); border-radius: 3px; }
    .ingredient-grid::-webkit-scrollbar-thumb { background: var(--gold-light); border-radius: 3px; }

    /* ========================================
       INGREDIENT CARD
    ======================================== */
    .ingredient-card {
      background: var(--cream);
      border: 2px solid transparent;
      border-radius: var(--radius-md);
      padding: 1rem;
      cursor: pointer;
      transition: all var(--transition);
      position: relative;
      text-align: center;
    }

    .ingredient-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-hover);
    }

    .ingredient-card.selected {
      border-color: var(--gold);
      background: rgba(196, 163, 90, 0.1);
    }

    .ingredient-card.selected {
      animation: scaleIn 0.2s ease;
    }

    .ingredient-card .check-mark {
      position: absolute;
      top: 0.5rem;
      right: 0.5rem;
      width: 24px;
      height: 24px;
      background: var(--gold);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      opacity: 0;
      transform: scale(0.5);
      transition: all var(--transition);
    }

    .ingredient-card.selected .check-mark {
      opacity: 1;
      transform: scale(1);
    }

    .ingredient-card .check-mark svg {
      width: 14px;
      height: 14px;
      color: var(--white);
    }

    .ingredient-card .emoji {
      font-size: 1.75rem;
      margin-bottom: 0.5rem;
    }

    .ingredient-card .name {
      font-size: 0.875rem;
      font-weight: 500;
      color: var(--text);
      margin-bottom: 0.25rem;
      line-height: 1.3;
    }

    .ingredient-card .protein {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .ingredient-card .api-tag {
      position: absolute;
      top: 0.5rem;
      left: 0.5rem;
      background: var(--info);
      color: white;
      padding: 0.125rem 0.375rem;
      border-radius: var(--radius-full);
      font-size: 0.625rem;
      font-weight: 600;
    }

    .no-results {
      grid-column: 1 / -1;
      text-align: center;
      padding: 2rem;
      color: var(--text-muted);
    }

    /* ========================================
       GRAM INPUT
    ======================================== */
    .serving-control {
      display: flex;
      align-items: center;
      gap: 0.75rem;
      padding: 0.75rem;
      background: var(--cream);
      border-radius: var(--radius-md);
      margin-top: 0.5rem;
    }

    .serving-control span {
      font-size: 0.8125rem;
      color: var(--text-muted);
      min-width: 50px;
    }

    .serving-slider {
      flex: 1;
      -webkit-appearance: none;
      height: 6px;
      border-radius: 3px;
      background: var(--gold-light);
      outline: none;
    }

    .serving-slider::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--gold);
      cursor: pointer;
      box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    }

    .serving-slider::-moz-range-thumb {
      width: 20px;
      height: 20px;
      border-radius: 50%;
      background: var(--gold);
      cursor: pointer;
      border: none;
    }

    .gram-input {
      width: 65px;
      padding: 0.375rem 0.5rem;
      border: 1.5px solid var(--gold-light);
      border-radius: var(--radius-sm);
      font-size: 0.8125rem;
      font-family: inherit;
      text-align: center;
      background: var(--white);
      color: var(--text);
      font-weight: 600;
      transition: border-color var(--transition);
    }

    .gram-input:focus {
      outline: none;
      border-color: var(--gold);
    }

    /* ========================================
       SELECTED ITEMS
    ======================================== */
    .selected-section {
      margin-top: 1.5rem;
      padding-top: 1.5rem;
      border-top: 1px solid var(--gold-light);
    }

    .selected-section h4 {
      font-size: 0.875rem;
      font-weight: 600;
      margin: 0 0 0.75rem 0;
      color: var(--text-muted);
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .selected-items {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .selected-item {
      background: var(--cream);
      border-radius: var(--radius-md);
      padding: 0.75rem;
      animation: slideInRight 0.3s ease;
    }

    .selected-item-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }

    .selected-item-name {
      font-size: 0.875rem;
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .selected-item-remove {
      background: none;
      border: none;
      color: var(--danger);
      cursor: pointer;
      padding: 0.25rem;
      font-size: 1.25rem;
      line-height: 1;
      transition: transform var(--transition);
    }

    .selected-item-remove:hover {
      transform: scale(1.2);
    }

    .empty-state {
      color: var(--text-muted);
      font-size: 0.875rem;
      text-align: center;
      padding: 1rem;
    }

    .clear-all {
      display: block;
      width: 100%;
      margin-top: 1rem;
      padding: 0.75rem;
      background: var(--brown);
      color: var(--white);
      border: none;
      border-radius: var(--radius-md);
      font-size: 0.9375rem;
      font-weight: 600;
      font-family: inherit;
      cursor: pointer;
      transition: all var(--transition);
    }

    .clear-all:hover { background: var(--brown-dark); }

    /* ========================================
       MEAL PRESETS
    ======================================== */
    .presets-section {
      margin-bottom: 1rem;
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--gold-light);
    }

    .presets-label {
      font-size: 0.8125rem;
      font-weight: 600;
      color: var(--text-muted);
      margin-bottom: 0.5rem;
      display: flex;
      align-items: center;
      gap: 0.375rem;
    }

    .presets-grid {
      display: flex;
      gap: 0.5rem;
      overflow-x: auto;
      padding-bottom: 0.25rem;
      scrollbar-width: none;
    }

    .presets-grid::-webkit-scrollbar { display: none; }

    .preset-btn {
      flex-shrink: 0;
      padding: 0.5rem 1rem;
      border: 1.5px solid var(--gold-light);
      background: var(--white);
      color: var(--text);
      border-radius: var(--radius-full);
      font-size: 0.8125rem;
      font-weight: 500;
      font-family: inherit;
      cursor: pointer;
      transition: all var(--transition);
      white-space: nowrap;
    }

    .preset-btn:hover {
      border-color: var(--gold);
      background: var(--cream);
    }

    /* ========================================
       CHARTS
    ======================================== */
    .charts-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 1rem;
      margin-bottom: 1.5rem;
    }

    .chart-container {
      background: var(--cream);
      border-radius: var(--radius-md);
      padding: 1rem;
      text-align: center;
    }

    .chart-container h4 {
      font-size: 0.8125rem;
      font-weight: 600;
      color: var(--text-muted);
      margin: 0 0 0.5rem 0;
    }

    .chart-wrapper {
      position: relative;
      height: 140px;
    }

    /* ========================================
       CALORIE CARD
    ======================================== */
    .calorie-card {
      background: linear-gradient(135deg, var(--gold) 0%, var(--gold-dark) 100%);
      color: var(--white);
      border-radius: var(--radius-md);
      padding: 1.25rem;
      text-align: center;
      margin-bottom: 1.5rem;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 1rem;
    }

    .calorie-item .value {
      font-size: 1.5rem;
      font-weight: 700;
      transition: all 0.3s ease;
    }

    .calorie-item .label {
      font-size: 0.75rem;
      opacity: 0.9;
    }

    /* ========================================
       WARNINGS / OVERDOSE
    ======================================== */
    .warnings-section {
      margin-bottom: 1rem;
    }

    .warning-card {
      background: #FFF3E0;
      border: 1.5px solid var(--warning);
      border-radius: var(--radius-md);
      padding: 0.875rem 1rem;
      margin-bottom: 0.5rem;
      display: flex;
      align-items: flex-start;
      gap: 0.75rem;
      font-size: 0.8125rem;
      animation: slideInUp 0.3s ease;
    }

    .warning-card.danger {
      background: #FFEBEE;
      border-color: var(--danger);
    }

    [data-theme="dark"] .warning-card {
      background: #2a2000;
    }

    [data-theme="dark"] .warning-card.danger {
      background: #2a0000;
    }

    .warning-icon {
      font-size: 1.25rem;
      flex-shrink: 0;
      line-height: 1;
    }

    .warning-text strong {
      color: var(--text);
    }

    .warning-text {
      color: var(--text-muted);
      line-height: 1.4;
    }

    /* ========================================
       NUTRIENT SECTIONS
    ======================================== */
    .nutrient-section {
      border: 1px solid var(--gold-light);
      border-radius: var(--radius-md);
      margin-bottom: 1rem;
      overflow: hidden;
      transition: all var(--transition);
    }

    .section-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem;
      background: var(--cream);
      cursor: pointer;
      transition: background var(--transition);
      user-select: none;
    }

    .section-header:hover { background: var(--gold-light); }

    .section-header .title {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      font-weight: 600;
      font-size: 0.9375rem;
    }

    .section-header .status {
      width: 24px;
      height: 24px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      transition: all var(--transition);
    }

    .status.good { background: var(--success); color: white; }
    .status.warning { background: var(--warning); color: white; }
    .status.bad { background: var(--danger); color: white; }

    .section-header .chevron {
      width: 20px;
      height: 20px;
      color: var(--text-muted);
      transition: transform var(--transition);
    }

    .nutrient-section.expanded .section-header .chevron {
      transform: rotate(180deg);
    }

    .section-content {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.3s ease;
    }

    .nutrient-section.expanded .section-content {
      max-height: 1000px;
    }

    .section-inner { padding: 1rem; }

    /* ========================================
       NUTRIENT BARS
    ======================================== */
    .nutrient-bar {
      margin-bottom: 0.875rem;
    }

    .nutrient-bar:last-child { margin-bottom: 0; }

    .nutrient-bar .bar-header {
      display: flex;
      justify-content: space-between;
      margin-bottom: 0.375rem;
      font-size: 0.8125rem;
    }

    .nutrient-bar .bar-name {
      color: var(--text);
      font-weight: 500;
      display: flex;
      align-items: center;
      gap: 0.375rem;
    }

    .nutrient-bar .bar-name .overdose-icon {
      color: var(--danger);
      font-size: 0.75rem;
      animation: pulse 1s infinite;
    }

    .nutrient-bar .bar-value {
      color: var(--text-muted);
    }

    .nutrient-bar .bar-track {
      height: 8px;
      background: var(--cream);
      border-radius: 4px;
      overflow: hidden;
      position: relative;
    }

    .nutrient-bar .bar-fill {
      height: 100%;
      border-radius: 4px;
      transition: width 0.5s ease;
    }

    .bar-fill.low { background: linear-gradient(90deg, var(--danger), #EF5350); }
    .bar-fill.medium { background: linear-gradient(90deg, var(--warning), #FFB74D); }
    .bar-fill.good { background: linear-gradient(90deg, var(--success), #66BB6A); }
    .bar-fill.overdose { background: linear-gradient(90deg, var(--danger), #B71C1C); }

    /* ========================================
       COMPARE MODE
    ======================================== */
    .compare-panel { display: none; }
    .compare-panel.active { display: block; }

    .compare-select {
      width: 100%;
      padding: 0.875rem;
      border: 2px solid var(--gold-light);
      border-radius: var(--radius-md);
      font-size: 1rem;
      font-family: inherit;
      background: var(--white);
      color: var(--text);
      margin-bottom: 1rem;
      cursor: pointer;
    }

    .compare-select:focus {
      outline: none;
      border-color: var(--gold);
    }

    .compare-table {
      width: 100%;
      border-collapse: collapse;
    }

    .compare-table th,
    .compare-table td {
      padding: 0.75rem;
      text-align: left;
      border-bottom: 1px solid var(--gold-light);
      font-size: 0.875rem;
    }

    .compare-table th {
      background: var(--cream);
      font-weight: 600;
    }

    .compare-table .winner {
      color: var(--success);
      font-weight: 600;
    }

    /* ========================================
       SUGGESTIONS & PROMO
    ======================================== */
    .suggestions-card {
      background: linear-gradient(135deg, var(--cream) 0%, var(--gold-light) 100%);
      border-radius: var(--radius-md);
      padding: 1.25rem;
      margin-bottom: 1rem;
    }

    .suggestions-card h3 {
      font-size: 1rem;
      font-weight: 600;
      margin: 0 0 0.75rem 0;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .suggestion-item {
      font-size: 0.875rem;
      color: var(--text);
      padding: 0.5rem 0;
      border-bottom: 1px solid rgba(196, 163, 90, 0.3);
    }

    .suggestion-item:last-child {
      border-bottom: none;
      padding-bottom: 0;
    }

    .suggestion-item strong { color: var(--gold-dark); }

    .tahini-promo {
      background: linear-gradient(135deg, var(--gold) 0%, var(--brown) 100%);
      color: var(--white);
      border-radius: var(--radius-md);
      padding: 1.25rem;
      text-align: center;
      display: none;
    }

    .tahini-promo.visible { display: block; }

    .tahini-promo p {
      margin: 0 0 1rem 0;
      font-size: 0.9375rem;
    }

    .tahini-promo .btn {
      display: inline-block;
      background: var(--white);
      color: var(--brown);
      padding: 0.625rem 1.25rem;
      border-radius: var(--radius-full);
      font-weight: 600;
      font-size: 0.875rem;
      text-decoration: none;
      transition: all var(--transition);
      margin: 0 0.25rem;
      border: none;
      cursor: pointer;
    }

    .tahini-promo .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.2);
    }

    /* ========================================
       MEAL HISTORY
    ======================================== */
    .history-section {
      margin-top: 1.5rem;
    }

    .history-card {
      background: var(--cream);
      border-radius: var(--radius-md);
      padding: 1rem;
      margin-bottom: 0.75rem;
      cursor: pointer;
      transition: all var(--transition);
      border: 1.5px solid transparent;
    }

    .history-card:hover {
      border-color: var(--gold);
      box-shadow: var(--shadow-hover);
    }

    .history-card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 0.5rem;
    }

    .history-card-title {
      font-weight: 600;
      font-size: 0.875rem;
      color: var(--text);
    }

    .history-card-date {
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .history-card-stats {
      display: flex;
      gap: 1rem;
      font-size: 0.75rem;
      color: var(--text-muted);
    }

    .history-card-stats span {
      display: flex;
      align-items: center;
      gap: 0.25rem;
    }

    .history-card-ingredients {
      display: flex;
      flex-wrap: wrap;
      gap: 0.25rem;
      margin-top: 0.5rem;
    }

    .history-card-ingredients span {
      font-size: 1rem;
    }

    .history-card-actions {
      display: flex;
      gap: 0.5rem;
      margin-top: 0.75rem;
    }

    .history-btn {
      padding: 0.375rem 0.75rem;
      border: 1.5px solid var(--gold-light);
      background: var(--white);
      color: var(--text);
      border-radius: var(--radius-full);
      font-size: 0.75rem;
      font-weight: 500;
      font-family: inherit;
      cursor: pointer;
      transition: all var(--transition);
    }

    .history-btn:hover {
      border-color: var(--gold);
      background: var(--gold);
      color: white;
    }

    .history-btn.danger {
      border-color: var(--danger);
      color: var(--danger);
    }

    .history-btn.danger:hover {
      background: var(--danger);
      color: white;
    }

    /* ========================================
       MODAL
    ======================================== */
    .modal-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: rgba(0,0,0,0.5);
      z-index: 2000;
      display: none;
      align-items: center;
      justify-content: center;
      padding: 1rem;
      animation: fadeIn 0.2s ease;
    }

    .modal-overlay.visible {
      display: flex;
    }

    .modal-content {
      background: var(--white);
      border-radius: var(--radius-lg);
      padding: 2rem;
      max-width: 500px;
      width: 100%;
      max-height: 90vh;
      overflow-y: auto;
      box-shadow: var(--shadow-hover);
      animation: scaleIn 0.2s ease;
    }

    .modal-content h3 {
      margin: 0 0 1rem 0;
      font-size: 1.25rem;
    }

    .modal-close {
      float: right;
      background: none;
      border: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: var(--text-muted);
      padding: 0;
      line-height: 1;
    }

    .modal-input {
      width: 100%;
      padding: 0.75rem 1rem;
      border: 2px solid var(--gold-light);
      border-radius: var(--radius-md);
      font-size: 1rem;
      font-family: inherit;
      margin-bottom: 1rem;
      background: var(--white);
      color: var(--text);
    }

    .modal-input:focus {
      outline: none;
      border-color: var(--gold);
    }

    .modal-btn {
      padding: 0.75rem 1.5rem;
      border: none;
      background: var(--gold);
      color: white;
      border-radius: var(--radius-full);
      font-size: 1rem;
      font-weight: 600;
      font-family: inherit;
      cursor: pointer;
      transition: all var(--transition);
      width: 100%;
    }

    .modal-btn:hover {
      background: var(--gold-dark);
    }

    /* ========================================
       FLOATING MEAL BAR (Mobile)
    ======================================== */
    .meal-bar {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      background: var(--white);
      box-shadow: 0 -4px 24px rgba(44, 24, 16, 0.15);
      padding: 1rem;
      z-index: 100;
      transform: translateY(100%);
      transition: transform 0.3s ease;
    }

    .meal-bar.visible { transform: translateY(0); }

    @media (min-width: 1024px) {
      .meal-bar { display: none; }
    }

    @media (max-width: 1023px) {
      .calc-container { padding-bottom: 100px; }
    }

    /* ========================================
       TOAST NOTIFICATIONS
    ======================================== */
    .toast-container {
      position: fixed;
      top: 4rem;
      right: 1rem;
      z-index: 3000;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .toast {
      padding: 0.875rem 1.25rem;
      border-radius: var(--radius-md);
      font-size: 0.875rem;
      font-weight: 500;
      color: white;
      box-shadow: var(--shadow-hover);
      animation: slideInRight 0.3s ease;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      max-width: 350px;
    }

    .toast.success { background: var(--success); }
    .toast.warning { background: var(--warning); }
    .toast.error { background: var(--danger); }
    .toast.info { background: var(--info); }

    .toast.fade-out {
      animation: fadeOut 0.3s ease forwards;
    }

    @keyframes fadeOut {
      to { opacity: 0; transform: translateX(20px); }
    }

    /* ========================================
       KEYBOARD SHORTCUTS HINT
    ======================================== */
    .shortcuts-hint {
      position: fixed;
      bottom: 1rem;
      left: 1rem;
      z-index: 100;
      font-size: 0.75rem;
      color: var(--text-muted);
      display: none;
    }

    @media (min-width: 1024px) {
      .shortcuts-hint { display: block; }
    }

    .shortcuts-hint kbd {
      background: var(--cream);
      border: 1px solid var(--gold-light);
      padding: 0.125rem 0.375rem;
      border-radius: 4px;
      font-size: 0.6875rem;
      font-family: inherit;
    }

    /* ========================================
       ACCESSIBILITY
    ======================================== */
    .sr-only {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }

    *:focus-visible {
      outline: 3px solid var(--gold);
      outline-offset: 2px;
    }

    /* Skip to content */
    .skip-link {
      position: absolute;
      top: -100%;
      left: 1rem;
      background: var(--gold);
      color: white;
      padding: 0.75rem 1.5rem;
      border-radius: var(--radius-md);
      font-weight: 600;
      z-index: 9999;
      transition: top 0.2s;
    }

    .skip-link:focus {
      top: 1rem;
    }

    /* ========================================
       PRINT STYLES
    ======================================== */
    @media print {
      .top-bar,
      .meal-bar,
      .search-box,
      .category-pills,
      .ingredient-grid,
      .clear-all,
      .tahini-promo,
      .view-toggle,
      .personalization-bar,
      .meal-slots,
      .presets-section,
      .shortcuts-hint,
      .toast-container {
        display: none !important;
      }

      .calc-panel {
        box-shadow: none;
        border: 1px solid #ddd;
      }

      .nutrient-section { break-inside: avoid; }

      .nutrient-section.expanded .section-content {
        max-height: none;
      }
    }

    /* ========================================
       RESPONSIVE TWEAKS
    ======================================== */
    @media (max-width: 600px) {
      .calc-hero h1 { font-size: 1.5rem; }
      .stats-bar { gap: 1.25rem; }
      .stat-value { font-size: 1.5rem; }
      .charts-grid { grid-template-columns: 1fr; }
      .personalization-bar { flex-direction: column; align-items: stretch; }
    }
  </style>
</head>
<body class="is-preload">

  <!-- Skip Link -->
  <a href="#mainContent" class="skip-link">Skip to main content</a>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <!-- Save Meal Modal -->
  <div class="modal-overlay" id="saveMealModal">
    <div class="modal-content" role="dialog" aria-labelledby="saveModalTitle">
      <button class="modal-close" onclick="closeModal('saveMealModal')" aria-label="Close">&times;</button>
      <h3 id="saveModalTitle">üíæ <span data-i18n="modal.saveMeal">Save This Meal</span></h3>
      <input type="text" class="modal-input" id="mealNameInput" placeholder="e.g., Power Lunch Bowl" data-i18n-placeholder="modal.mealNamePlaceholder">
      <button class="modal-btn" onclick="saveMealFromModal()">
        <span data-i18n="modal.saveBtn">Save Meal</span>
      </button>
    </div>
  </div>

  <!-- Share Modal -->
  <div class="modal-overlay" id="shareModal">
    <div class="modal-content" role="dialog" aria-labelledby="shareModalTitle">
      <button class="modal-close" onclick="closeModal('shareModal')" aria-label="Close">&times;</button>
      <h3 id="shareModalTitle">üîó <span data-i18n="modal.shareMeal">Share This Meal</span></h3>
      <p style="font-size: 0.875rem; color: var(--text-muted); margin-bottom: 1rem;" data-i18n="modal.shareDesc">Copy this link to share your meal with others:</p>
      <input type="text" class="modal-input" id="shareUrlInput" readonly onclick="this.select()">
      <button class="modal-btn" onclick="copyShareUrl()">
        <span data-i18n="modal.copyBtn">Copy Link</span>
      </button>
    </div>
  </div>

  <!-- Calculator App -->
  <div class="calc-app" id="calcApp">

    <!-- Top Bar -->
    <div class="top-bar" role="navigation" aria-label="Settings">
      <button class="top-bar-btn active" onclick="setLanguage('en')" id="langEn" aria-label="English">EN</button>
      <button class="top-bar-btn" onclick="setLanguage('pt')" id="langPt" aria-label="Portuguese">PT</button>
      <div class="top-bar-divider"></div>
      <button class="top-bar-btn" onclick="toggleTheme()" id="themeBtn" aria-label="Toggle dark mode">üåô</button>
      <div class="top-bar-divider"></div>
      <button class="top-bar-btn" onclick="undo()" id="undoBtn" disabled aria-label="Undo">
        ‚Ü©Ô∏è <span data-i18n="action.undo">Undo</span>
      </button>
      <button class="top-bar-btn" onclick="redo()" id="redoBtn" disabled aria-label="Redo">
        ‚Ü™Ô∏è <span data-i18n="action.redo">Redo</span>
      </button>
      <div class="top-bar-divider"></div>
      <button class="top-bar-btn" onclick="openModal('saveMealModal')" aria-label="Save meal">
        üíæ <span data-i18n="action.save">Save</span>
      </button>
      <button class="top-bar-btn" onclick="shareMeal()" aria-label="Share meal">
        üîó <span data-i18n="action.share">Share</span>
      </button>
      <button class="top-bar-btn" onclick="exportImage()" aria-label="Export as image">
        üì∏ <span data-i18n="action.export">Export</span>
      </button>
    </div>

    <!-- Hero -->
    <section class="calc-hero" role="banner">
      <h1 data-i18n="hero.title">Vegan Nutrition Calculator</h1>
      <p data-i18n="hero.subtitle">Build your meal. Track calories. Check completeness.</p>
      
      <div class="stats-bar" aria-label="Quick nutrition stats">
        <div class="stat-item">
          <div class="stat-value" id="heroCalories" aria-live="polite">0</div>
          <div class="stat-label" data-i18n="stats.calories">Calories</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="heroProtein" aria-live="polite">0g</div>
          <div class="stat-label" data-i18n="stats.protein">Protein</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="heroScore" aria-live="polite">0%</div>
          <div class="stat-label" data-i18n="stats.complete">Complete</div>
        </div>
        <div class="stat-item">
          <div class="stat-value" id="heroItems" aria-live="polite">0</div>
          <div class="stat-label" data-i18n="stats.ingredients">Ingredients</div>
        </div>
      </div>
    </section>

    <!-- Personalization Bar -->
    <div class="personalization-bar" role="form" aria-label="Personalize daily values">
      <label>
        üë§ <span data-i18n="personal.gender">Gender</span>:
        <select id="personalGender" onchange="updatePersonalDV()">
          <option value="female" data-i18n="personal.female">Female</option>
          <option value="male" data-i18n="personal.male">Male</option>
        </select>
      </label>
      <label>
        üéÇ <span data-i18n="personal.age">Age</span>:
        <input type="number" id="personalAge" value="30" min="1" max="120" onchange="updatePersonalDV()">
      </label>
      <label>
        ‚öñÔ∏è <span data-i18n="personal.weight">Weight (kg)</span>:
        <input type="number" id="personalWeight" value="70" min="30" max="200" onchange="updatePersonalDV()">
      </label>
      <label>
        üèÉ <span data-i18n="personal.activity">Activity</span>:
        <select id="personalActivity" onchange="updatePersonalDV()">
          <option value="sedentary" data-i18n="personal.sedentary">Sedentary</option>
          <option value="light" data-i18n="personal.light">Light</option>
          <option value="moderate" selected data-i18n="personal.moderate">Moderate</option>
          <option value="active" data-i18n="personal.active">Active</option>
          <option value="very-active" data-i18n="personal.veryActive">Very Active</option>
        </select>
      </label>
    </div>

    <!-- Meal Slots -->
    <div class="meal-slots" role="tablist" aria-label="Meal slots">
      <button class="meal-slot-btn active" role="tab" aria-selected="true" onclick="switchMealSlot('breakfast')">
        üåÖ <span data-i18n="slot.breakfast">Breakfast</span>
        <span class="slot-count" id="breakfastCount">0</span>
      </button>
      <button class="meal-slot-btn" role="tab" aria-selected="false" onclick="switchMealSlot('lunch')">
        ‚òÄÔ∏è <span data-i18n="slot.lunch">Lunch</span>
        <span class="slot-count" id="lunchCount">0</span>
      </button>
      <button class="meal-slot-btn" role="tab" aria-selected="false" onclick="switchMealSlot('dinner')">
        üåô <span data-i18n="slot.dinner">Dinner</span>
        <span class="slot-count" id="dinnerCount">0</span>
      </button>
      <button class="meal-slot-btn" role="tab" aria-selected="false" onclick="switchMealSlot('snacks')">
        üçé <span data-i18n="slot.snacks">Snacks</span>
        <span class="slot-count" id="snacksCount">0</span>
      </button>
      <div class="top-bar-divider" style="background: var(--gold-light);"></div>
      <button class="meal-slot-btn" role="tab" onclick="switchMealSlot('all')" id="viewAllBtn">
        üìä <span data-i18n="slot.viewAll">View All</span>
      </button>
    </div>

    <!-- Main Container -->
    <div class="calc-container" id="mainContent">
      <div class="calc-grid">

        <!-- Left Panel: Ingredients -->
        <div class="calc-panel" role="region" aria-label="Ingredient selection">
          <div class="panel-header">
            <h2 data-i18n="panel.ingredients">Select Ingredients</h2>
            <div class="view-toggle" role="tablist">
              <button class="active" onclick="setView('select', this)" data-i18n="view.select" role="tab" aria-selected="true">Select</button>
              <button onclick="setView('compare', this)" data-i18n="view.compare" role="tab" aria-selected="false">Compare</button>
            </div>
          </div>
          <div class="panel-body">

            <!-- Select View -->
            <div id="selectView" role="tabpanel">
              
              <!-- Meal Presets -->
              <div class="presets-section">
                <div class="presets-label">‚ö° <span data-i18n="presets.quickMeals">Quick Meals</span></div>
                <div class="presets-grid" role="list">
                  <button class="preset-btn" onclick="loadPreset('buddha-bowl')" role="listitem">ü•ó Buddha Bowl</button>
                  <button class="preset-btn" onclick="loadPreset('power-smoothie')" role="listitem">ü•§ Power Smoothie</button>
                  <button class="preset-btn" onclick="loadPreset('protein-plate')" role="listitem">üí™ Protein Plate</button>
                  <button class="preset-btn" onclick="loadPreset('mediterranean')" role="listitem">ü´í Mediterranean</button>
                  <button class="preset-btn" onclick="loadPreset('asian-bowl')" role="listitem">üçú Asian Bowl</button>
                </div>
              </div>

              <!-- Search with API -->
              <div class="search-box">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                  <circle cx="11" cy="11" r="8"/>
                  <path d="m21 21-4.35-4.35"/>
                </svg>
                <input type="text" id="ingredientSearch" data-i18n-placeholder="search.placeholder" placeholder="Search ingredients (local + USDA database)..." oninput="handleSearch()" autocomplete="off" role="combobox" aria-expanded="false" aria-controls="apiSearchResults">
                <div class="api-search-results" id="apiSearchResults" role="listbox">
                  <!-- Populated by API search -->
                </div>
              </div>

              <!-- Category Pills -->
              <div class="category-pills" id="categoryPills
                " role="tablist" aria-label="Filter by category">
                <button class="category-pill active" data-category="all" data-i18n="category.all" role="tab" aria-selected="true">All</button>
                <button class="category-pill" data-category="legumes" data-i18n="category.legumes" role="tab">Legumes</button>
                <button class="category-pill" data-category="grains" data-i18n="category.grains" role="tab">Grains</button>
                <button class="category-pill" data-category="nuts-seeds" data-i18n="category.nutsSeeds" role="tab">Nuts & Seeds</button>
                <button class="category-pill" data-category="vegetables" data-i18n="category.vegetables" role="tab">Vegetables</button>
                <button class="category-pill" data-category="fruits" data-i18n="category.fruits" role="tab">Fruits</button>
                <button class="category-pill" data-category="fermented" data-i18n="category.fermented" role="tab">Fermented</button>
                <button class="category-pill" data-category="other" data-i18n="category.other" role="tab">Other</button>
                <button class="category-pill" data-category="api" data-i18n="category.api" role="tab">üîç API</button>
              </div>

              <!-- Ingredient Grid -->
              <div class="ingredient-grid" id="ingredientGrid" role="list" aria-label="Available ingredients">
                <!-- Populated by JavaScript -->
              </div>
            </div>

            <!-- Compare View -->
            <div id="compareView" class="compare-panel" role="tabpanel">
              <p data-i18n="compare.description">Compare tahini with other foods:</p>
              <select class="compare-select" id="compareSelect" onchange="updateComparison()" aria-label="Select food to compare">
                <option value="" data-i18n="compare.select">-- Select a food to compare --</option>
              </select>
              <div id="compareResults"></div>
            </div>

            <!-- Selected Items -->
            <div class="selected-section" id="selectedSection">
              <h4>
                <span data-i18n="meal.yourMeal">Your Meal</span>
                <span id="mealCount">(0)</span>
              </h4>
              <div class="selected-items" id="selectedItems" role="list" aria-label="Selected ingredients">
                <div class="empty-state" data-i18n="meal.empty">No ingredients selected</div>
              </div>
              <button class="clear-all" onclick="clearAll()" data-i18n="meal.clearAll">Clear All</button>
            </div>

          </div>
        </div>

        <!-- Middle Panel: Results -->
        <div class="calc-panel" role="region" aria-label="Nutrition dashboard">
          <div class="panel-header">
            <h2 data-i18n="panel.dashboard">Nutrition Dashboard</h2>
            <div class="panel-header-actions">
              <button class="top-bar-btn" onclick="window.print()" style="background: var(--gold); color: white; font-size: 0.8125rem; padding: 0.375rem 0.75rem;">
                üñ®Ô∏è <span data-i18n="action.print">Print</span>
              </button>
            </div>
          </div>
          <div class="panel-body" id="dashboardBody">

            <!-- B12 Warning Banner -->
            <div id="b12Warning" class="warning-card danger" style="display: none;">
              <span class="warning-icon">üö®</span>
              <div class="warning-text">
                <strong data-i18n="warning.b12Title">Vitamin B12 Required!</strong><br>
                <span data-i18n="warning.b12Text">Vitamin B12 is not naturally available in plant foods. All vegans should supplement B12 (at least 250mcg/day cyanocobalamin or 2500mcg/week).</span>
              </div>
            </div>

            <!-- Overdose Warnings -->
            <div class="warnings-section" id="warningsSection">
              <!-- Populated by JavaScript -->
            </div>

            <!-- Calorie & Macro Card -->
            <div class="calorie-card">
              <div class="calorie-item">
                <div class="value" id="totalCalories">0</div>
                <div class="label" data-i18n="macro.calories">Calories</div>
              </div>
              <div class="calorie-item">
                <div class="value" id="totalCarbs">0g</div>
                <div class="label" data-i18n="macro.carbs">Carbs</div>
              </div>
              <div class="calorie-item">
                <div class="value" id="totalFat">0g</div>
                <div class="label" data-i18n="macro.fat">Fat</div>
              </div>
            </div>

            <!-- Charts -->
            <div class="charts-grid">
              <div class="chart-container">
                <h4 data-i18n="chart.macros">Macronutrients</h4>
                <div class="chart-wrapper">
                  <canvas id="macroChart" aria-label="Macronutrient distribution chart"></canvas>
                </div>
              </div>
              <div class="chart-container">
                <h4 data-i18n="chart.completion">Daily Values</h4>
                <div class="chart-wrapper">
                  <canvas id="completionChart" aria-label="Daily value completion chart"></canvas>
                </div>
              </div>
            </div>

            <!-- Amino Acids Section -->
            <div class="nutrient-section expanded" id="aminoSection">
              <div class="section-header" onclick="toggleSection('aminoSection')" role="button" aria-expanded="true" tabindex="0" onkeydown="if(event.key==='Enter')toggleSection('aminoSection')">
                <span class="title">
                  <span class="status bad" id="aminoStatus" aria-label="Status: incomplete">!</span>
                  <span data-i18n="section.amino">Essential Amino Acids</span>
                </span>
                <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                  <path d="m6 9 6 6 6-6"/>
                </svg>
              </div>
              <div class="section-content">
                <div class="section-inner" id="aminoBars"></div>
              </div>
            </div>

            <!-- Vitamins Section -->
            <div class="nutrient-section" id="vitaminSection">
              <div class="section-header" onclick="toggleSection('vitaminSection')" role="button" aria-expanded="false" tabindex="0" onkeydown="if(event.key==='Enter')toggleSection('vitaminSection')">
                <span class="title">
                  <span class="status bad" id="vitaminStatus">!</span>
                  <span data-i18n="section.vitamins">Key Vitamins</span>
                </span>
                <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                  <path d="m6 9 6 6 6-6"/>
                </svg>
              </div>
              <div class="section-content">
                <div class="section-inner" id="vitaminBars"></div>
              </div>
            </div>

            <!-- Minerals Section -->
            <div class="nutrient-section" id="mineralSection">
              <div class="section-header" onclick="toggleSection('mineralSection')" role="button" aria-expanded="false" tabindex="0" onkeydown="if(event.key==='Enter')toggleSection('mineralSection')">
                <span class="title">
                  <span class="status bad" id="mineralStatus">!</span>
                  <span data-i18n="section.minerals">Essential Minerals</span>
                </span>
                <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                  <path d="m6 9 6 6 6-6"/>
                </svg>
              </div>
              <div class="section-content">
                <div class="section-inner" id="mineralBars"></div>
              </div>
            </div>

            <!-- Fats Section -->
            <div class="nutrient-section" id="fatSection">
              <div class="section-header" onclick="toggleSection('fatSection')" role="button" aria-expanded="false" tabindex="0" onkeydown="if(event.key==='Enter')toggleSection('fatSection')">
                <span class="title">
                  <span class="status bad" id="fatStatus">!</span>
                  <span data-i18n="section.fats">Healthy Fats & Fiber</span>
                </span>
                <svg class="chevron" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                  <path d="m6 9 6 6 6-6"/>
                </svg>
              </div>
              <div class="section-content">
                <div class="section-inner" id="fatBars"></div>
              </div>
            </div>

          </div>
        </div>

        <!-- Right Panel: Suggestions & History -->
        <div class="calc-panel" role="complementary" aria-label="Suggestions and meal history">
          <div class="panel-header">
            <h2 data-i18n="panel.suggestions">Suggestions</h2>
          </div>
          <div class="panel-body">

            <!-- Score Circle -->
            <div style="text-align: center; margin-bottom: 1.5rem;">
              <div style="position: relative; width: 140px; height: 140px; margin: 0 auto;">
                <svg viewBox="0 0 100 100" style="transform: rotate(-90deg); width: 100%; height: 100%;" aria-hidden="true">
                  <circle cx="50" cy="50" r="44" fill="none" stroke="var(--cream)" stroke-width="10"/>
                  <circle id="scoreProgress" cx="50" cy="50" r="44" fill="none" stroke="var(--gold)" stroke-width="10" stroke-linecap="round" stroke-dasharray="276.46" stroke-dashoffset="276.46"/>
                </svg>
                <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center;">
                  <div id="scoreValue" style="font-size: 2rem; font-weight: 700; color: var(--text);" aria-live="polite">0%</div>
                  <div style="font-size: 0.75rem; color: var(--text-muted);" data-i18n="score.complete">Complete</div>
                </div>
              </div>
            </div>

            <!-- Suggestions -->
            <div class="suggestions-card" id="suggestionsCard">
              <h3>
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="var(--gold-dark)" stroke-width="2" aria-hidden="true">
                  <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/>
                </svg>
                <span data-i18n="suggestions.title">Suggestions</span>
              </h3>
              <div id="suggestionList">
                <div class="suggestion-item" data-i18n="suggestions.default">Select ingredients to get suggestions</div>
              </div>
            </div>

            <!-- Tahini Promo -->
            <div class="tahini-promo" id="tahiniPromo">
              <p><strong>Tahini</strong> <span data-i18n="promo.message">adds calcium, iron, zinc & healthy fats!</span></p>
              <button class="btn" onclick="addTahini()" data-i18n="promo.add">Add Tahini</button>
              <a href="index.html#shop" class="btn" style="background: transparent; border: 2px solid white; color: white;" data-i18n="promo.learn">Learn More</a>
            </div>

            <!-- Tips -->
            <div style="margin-top: 1.5rem; padding: 1rem; background: var(--cream); border-radius: var(--radius-md);">
              <h4 style="font-size: 0.9375rem; margin: 0 0 0.75rem 0; color: var(--text);" data-i18n="tips.title">üí° Nutrition Tips</h4>
              <div id="nutritionTips" style="font-size: 0.8125rem; color: var(--text-muted); line-height: 1.6;">
                <p data-i18n="tips.default">Combine legumes with grains for complete protein. Add vitamin C to increase iron absorption!</p>
              </div>
            </div>

            <!-- Meal History -->
            <div class="history-section">
              <h4 style="font-size: 0.9375rem; margin: 0 0 0.75rem 0; color: var(--text); display: flex; align-items: center; gap: 0.5rem;">
                üìã <span data-i18n="history.title">Saved Meals</span>
              </h4>
              <div id="mealHistory">
                <div class="empty-state" data-i18n="history.empty">No saved meals yet</div>
              </div>
            </div>

          </div>
        </div>

      </div>
    </div>

    <!-- Floating Meal Bar (Mobile) -->
    <div class="meal-bar" id="mealBar">
      <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
        <span style="font-weight: 600;" data-i18n="meal.yourMeal">Your Meal</span>
        <span id="mobileCalories" style="color: var(--gold); font-weight: 600;">0 kcal</span>
      </div>
      <div id="mealBarItems" style="display: flex; flex-wrap: wrap; gap: 0.5rem;"></div>
    </div>

    <!-- Keyboard Shortcuts Hint -->
    <div class="shortcuts-hint">
      <kbd>Ctrl</kbd>+<kbd>Z</kbd> Undo &nbsp;|&nbsp;
      <kbd>Ctrl</kbd>+<kbd>Y</kbd> Redo &nbsp;|&nbsp;
      <kbd>Ctrl</kbd>+<kbd>S</kbd> Save &nbsp;|&nbsp;
      <kbd>/</kbd> Search
    </div>

  </div>

 <script>
var baseDailyValues, upperLimits, upperLimitWarnings, nutrientNames, mealPresets, API_CONFIG;
    // ============================================
    // COMPLETE TRANSLATIONS (Extended)
    // ============================================
    var translations = {
      en: {
        hero: { title: "Vegan Nutrition Calculator", subtitle: "Build your meal. Track calories. Check completeness." },
        stats: { calories: "Calories", protein: "Protein", complete: "Complete", ingredients: "Ingredients" },
        panel: { ingredients: "Select Ingredients", dashboard: "Nutrition Dashboard", suggestions: "Suggestions" },
        view: { select: "Select", compare: "Compare" },
        search: { placeholder: "Search ingredients (local + USDA database)..." },
        category: { all: "All", legumes: "Legumes", grains: "Grains", nutsSeeds: "Nuts & Seeds", vegetables: "Vegetables", fruits: "Fruits", fermented: "Fermented", other: "Other", api: "üîç API" },
        compare: { description: "Compare tahini with other foods:", select: "-- Select a food to compare --", nutrient: "Nutrient", tahini: "Tahini", winner: "Winner" },
        meal: { yourMeal: "Your Meal", empty: "No ingredients selected", clearAll: "Clear All", serving: "Serving" },
        action: { print: "Print", undo: "Undo", redo: "Redo", save: "Save", share: "Share", export: "Export" },
        macro: { calories: "Calories", carbs: "Carbs", fat: "Fat" },
        chart: { macros: "Macronutrients", completion: "Daily Values" },
        section: { amino: "Essential Amino Acids", vitamins: "Key Vitamins", minerals: "Essential Minerals", fats: "Healthy Fats & Fiber" },
        score: { complete: "Complete" },
        suggestions: {
          title: "Suggestions", default: "Select ingredients to get suggestions",
          balanced: "Great job! Your meal looks nutritionally balanced.",
          addLegumes: "Add <strong>legumes</strong> (chickpeas, lentils, tofu) for lysine",
          addGrains: "Add <strong>grains</strong> or <strong>seeds</strong> for methionine",
          addCalcium: "Add <strong>tahini</strong> or fortified plant milk for calcium",
          addIron: "Add <strong>spinach</strong>, lentils, or pumpkin seeds for iron",
          addZinc: "Add <strong>tahini</strong> or pumpkin seeds for zinc",
          addOmega3: "Add <strong>flaxseeds</strong>, chia seeds, or walnuts for omega-3",
          addVitaminC: "Add <strong>bell peppers</strong> or citrus for vitamin C",
          addB12: "‚ö†Ô∏è <strong>Supplement B12</strong> ‚Äî essential for all vegans",
          addVitaminD: "Consider <strong>vitamin D</strong> supplement or sun exposure"
        },
        promo: { message: "adds calcium, iron, zinc & healthy fats!", add: "Add Tahini", learn: "Learn More" },
        tips: { title: "üí° Nutrition Tips", default: "Combine legumes with grains for complete protein. Add vitamin C to increase iron absorption!" },
        noResults: "No ingredients found",
        presets: { quickMeals: "Quick Meals" },
        personal: { gender: "Gender", age: "Age", weight: "Weight (kg)", activity: "Activity", female: "Female", male: "Male", sedentary: "Sedentary", light: "Light", moderate: "Moderate", active: "Active", veryActive: "Very Active" },
        slot: { breakfast: "Breakfast", lunch: "Lunch", dinner: "Dinner", snacks: "Snacks", viewAll: "View All" },
        modal: { saveMeal: "Save This Meal", mealNamePlaceholder: "e.g., Power Lunch Bowl", saveBtn: "Save Meal", shareMeal: "Share This Meal", shareDesc: "Copy this link to share your meal with others:", copyBtn: "Copy Link" },
        history: { title: "Saved Meals", empty: "No saved meals yet", load: "Load", delete: "Delete", duplicate: "Duplicate" },
        warning: {
          b12Title: "Vitamin B12 Required!",
          b12Text: "Vitamin B12 is not naturally available in plant foods. All vegans should supplement B12 (at least 250mcg/day cyanocobalamin or 2500mcg/week).",
          overdosePrefix: "High intake of",
          overdoseSuffix: "‚Äî exceeds upper tolerable limit. Consider reducing."
        },
        toast: { saved: "Meal saved!", deleted: "Meal deleted", copied: "Link copied!", exported: "Image exported!", cleared: "Meal cleared", loaded: "Meal loaded!", undone: "Action undone", redone: "Action redone", apiError: "Could not fetch from food database", added: "added to meal" }
      },
      pt: {
        hero: { title: "Calculadora de Nutri√ß√£o Vegana", subtitle: "Construa a sua refei√ß√£o. Acompanhe calorias. Verifique a completude." },
        stats: { calories: "Calorias", protein: "Prote√≠na", complete: "Completo", ingredients: "Ingredientes" },
        panel: { ingredients: "Selecionar Ingredientes", dashboard: "Painel Nutricional", suggestions: "Sugest√µes" },
        view: { select: "Selecionar", compare: "Comparar" },
        search: { placeholder: "Pesquisar ingredientes (local + base USDA)..." },
        category: { all: "Todos", legumes: "Leguminosas", grains: "Cereais", nutsSeeds: "Frutos Secos & Sementes", vegetables: "Vegetais", fruits: "Frutas", fermented: "Fermentados", other: "Outros", api: "üîç API" },
        compare: { description: "Compare tahini com outros alimentos:", select: "-- Selecione um alimento para comparar --", nutrient: "Nutriente", tahini: "Tahini", winner: "Vencedor" },
        meal: { yourMeal: "A Sua Refei√ß√£o", empty: "Nenhum ingrediente selecionado", clearAll: "Limpar Tudo", serving: "Por√ß√£o" },
        action: { print: "Imprimir", undo: "Desfazer", redo: "Refazer", save: "Guardar", share: "Partilhar", export: "Exportar" },
        macro: { calories: "Calorias", carbs: "Hidratos", fat: "Gordura" },
        chart: { macros: "Macronutrientes", completion: "Valores Di√°rios" },
        section: { amino: "Amino√°cidos Essenciais", vitamins: "Vitaminas Principais", minerals: "Minerais Essenciais", fats: "Gorduras Saud√°veis & Fibra" },
        score: { complete: "Completo" },
        suggestions: {
          title: "Sugest√µes", default: "Selecione ingredientes para obter sugest√µes",
          balanced: "√ìtimo trabalho! A sua refei√ß√£o parece nutricionalmente equilibrada.",
          addLegumes: "Adicione <strong>leguminosas</strong> (gr√£o-de-bico, lentilhas, tofu) para lisina",
          addGrains: "Adicione <strong>cereais</strong> ou <strong>sementes</strong> para metionina",
          addCalcium: "Adicione <strong>tahini</strong> ou leite vegetal fortificado para c√°lcio",
          addIron: "Adicione <strong>espinafres</strong>, lentilhas ou sementes de ab√≥bora para ferro",
          addZinc: "Adicione <strong>tahini</strong> ou sementes de ab√≥bora para zinco",
          addOmega3: "Adicione <strong>sementes de linha√ßa</strong>, chia ou nozes para √≥mega-3",
          addVitaminC: "Adicione <strong>pimentos</strong> ou citrinos para vitamina C",
          addB12: "‚ö†Ô∏è <strong>Suplemente B12</strong> ‚Äî essencial para todos os veganos",
          addVitaminD: "Considere suplemento de <strong>vitamina D</strong> ou exposi√ß√£o solar"
        },
        promo: { message: "adiciona c√°lcio, ferro, zinco e gorduras saud√°veis!", add: "Adicionar Tahini", learn: "Saber Mais" },
        tips: { title: "üí° Dicas de Nutri√ß√£o", default: "Combine leguminosas com cereais para prote√≠na completa. Adicione vitamina C para aumentar a absor√ß√£o de ferro!" },
        noResults: "Nenhum ingrediente encontrado",
        presets: { quickMeals: "Refei√ß√µes R√°pidas" },
        personal: { gender: "G√©nero", age: "Idade", weight: "Peso (kg)", activity: "Atividade", female: "Feminino", male: "Masculino", sedentary: "Sedent√°rio", light: "Ligeiro", moderate: "Moderado", active: "Ativo", veryActive: "Muito Ativo" },
        slot: { breakfast: "Pequeno-Almo√ßo", lunch: "Almo√ßo", dinner: "Jantar", snacks: "Lanches", viewAll: "Ver Tudo" },
        modal: { saveMeal: "Guardar Esta Refei√ß√£o", mealNamePlaceholder: "ex: Bowl de Prote√≠na", saveBtn: "Guardar Refei√ß√£o", shareMeal: "Partilhar Esta Refei√ß√£o", shareDesc: "Copie este link para partilhar a sua refei√ß√£o:", copyBtn: "Copiar Link" },
        history: { title: "Refei√ß√µes Guardadas", empty: "Nenhuma refei√ß√£o guardada", load: "Carregar", delete: "Apagar", duplicate: "Duplicar" },
        warning: {
          b12Title: "Vitamina B12 Necess√°ria!",
          b12Text: "A vitamina B12 n√£o est√° naturalmente dispon√≠vel em alimentos vegetais. Todos os veganos devem suplementar B12 (pelo menos 250mcg/dia de cianocobalamina ou 2500mcg/semana).",
          overdosePrefix: "Ingest√£o elevada de",
          overdoseSuffix: "‚Äî excede o limite superior toler√°vel. Considere reduzir."
        },
        toast: { saved: "Refei√ß√£o guardada!", deleted: "Refei√ß√£o apagada", copied: "Link copiado!", exported: "Imagem exportada!", cleared: "Refei√ß√£o limpa", loaded: "Refei√ß√£o carregada!", undone: "A√ß√£o desfeita", redone: "A√ß√£o refeita", apiError: "N√£o foi poss√≠vel consultar a base de dados", added: "adicionado √† refei√ß√£o" }
      }
    };

    var ingredientNamesPt = {
      'chickpeas': 'Gr√£o-de-bico (cozido)', 'lentils': 'Lentilhas (cozidas)', 'black-beans': 'Feij√£o Preto (cozido)',
      'kidney-beans': 'Feij√£o Vermelho (cozido)', 'white-beans': 'Feij√£o Branco (cozido)', 'tofu': 'Tofu (firme)',
      'tempeh': 'Tempeh', 'edamame': 'Edamame', 'mung-beans': 'Feij√£o Mungo (cozido)', 'split-peas': 'Ervilhas Partidas (cozidas)',
      'quinoa': 'Quinoa (cozida)', 'brown-rice': 'Arroz Integral (cozido)', 'oats': 'Aveia (cozida)',
      'buckwheat': 'Trigo Sarraceno (cozido)', 'millet': 'Milhete (cozido)', 'barley': 'Cevada (cozida)',
      'bulgur': 'Bulgur (cozido)', 'couscous': 'Cuscuz (cozido)', 'wild-rice': 'Arroz Selvagem (cozido)', 'amaranth': 'Amaranto (cozido)',
      'tahini': 'Tahini (Abbaya)', 'almonds': 'Am√™ndoas', 'walnuts': 'Nozes', 'cashews': 'Cajus', 'peanuts': 'Amendoins',
      'pistachios': 'Pist√°cios', 'brazil-nuts': 'Castanhas do Brasil', 'sunflower-seeds': 'Sementes de Girassol',
      'pumpkin-seeds': 'Sementes de Ab√≥bora', 'chia-seeds': 'Sementes de Chia', 'flaxseeds': 'Sementes de Linha√ßa',
      'hemp-seeds': 'Sementes de C√¢nhamo', 'sesame-seeds': 'Sementes de S√©samo', 'spinach': 'Espinafres (crus)',
      'kale': 'Couve Kale (crua)', 'broccoli': 'Br√≥colos (crus)', 'brussels-sprouts': 'Couves de Bruxelas',
      'sweet-potato': 'Batata Doce (assada)', 'carrots': 'Cenouras (cruas)', 'bell-pepper-red': 'Pimento Vermelho',
      'tomatoes': 'Tomates (crus)', 'avocado': 'Abacate', 'mushrooms': 'Cogumelos (brancos)', 'peas': 'Ervilhas Verdes (cruas)',
      'asparagus': 'Espargos (crus)', 'banana': 'Banana', 'orange': 'Laranja', 'blueberries': 'Mirtilos',
      'strawberries': 'Morangos', 'mango': 'Manga', 'kiwi': 'Kiwi', 'dates': 'T√¢maras (medjool)',
      'sauerkraut': 'Chucrute', 'kimchi': 'Kimchi', 'miso': 'Pasta de Miso', 'natto': 'Natto', 'soy-yogurt': 'Iogurte de Soja',
      'nutritional-yeast': 'Levedura Nutricional', 'spirulina': 'Spirulina', 'seaweed-nori': 'Alga Nori',
      'olive-oil': 'Azeite', 'flaxseed-oil': '√ìleo de Linha√ßa', 'fortified-plant-milk': 'Leite Vegetal Fortificado', 'cacao-powder': 'Cacau em P√≥'
    };

    let currentLang = 'en';

    // ============================================
    // EXPANDED INGREDIENT DATABASE (80+ items)
    // ============================================
    var ingredients = [
      // === LEGUMES ===
      { id: 'chickpeas', name: 'Chickpeas (cooked)', category: 'legumes', emoji: 'ü´ò', serving: '100g',
        nutrients: { calories: 164, protein: 8.9, carbs: 27.4, fat: 2.6, histidine: 0.24, isoleucine: 0.38, leucine: 0.63, lysine: 0.58, methionine: 0.12, phenylalanine: 0.47, threonine: 0.32, tryptophan: 0.08, valine: 0.36, vitaminA: 1, vitaminC: 1.3, vitaminK: 4, vitaminB6: 0.14, folate: 172, vitaminE: 0.35, thiamin: 0.12, riboflavin: 0.06, niacin: 0.53, calcium: 49, iron: 2.9, magnesium: 48, zinc: 1.5, potassium: 291, phosphorus: 168, selenium: 3.7, copper: 0.35, manganese: 1.03, omega3: 0.04, omega6: 1.1, fiber: 7.6 }},
      { id: 'lentils', name: 'Lentils (cooked)', category: 'legumes', emoji: 'ü´ò', serving: '100g',
        nutrients: { calories: 116, protein: 9.0, carbs: 20.1, fat: 0.4, histidine: 0.25, isoleucine: 0.39, leucine: 0.65, lysine: 0.63, methionine: 0.08, phenylalanine: 0.45, threonine: 0.32, tryptophan: 0.08, valine: 0.45, vitaminA: 8, vitaminC: 1.5, vitaminK: 1.7, vitaminB6: 0.18, folate: 181, vitaminE: 0.11, thiamin: 0.17, riboflavin: 0.07, niacin: 1.1, calcium: 19, iron: 3.3, magnesium: 36, zinc: 1.3, potassium: 369, phosphorus: 180, selenium: 2.8, copper: 0.25, manganese: 0.49, omega3: 0.04, omega6: 0.17, fiber: 7.9 }},
      { id: 'black-beans', name: 'Black Beans (cooked)', category: 'legumes', emoji: 'ü´ò', serving: '100g',
        nutrients: { calories: 132, protein: 8.9, carbs: 23.7, fat: 0.5, histidine: 0.24, isoleucine: 0.38, leucine: 0.69, lysine: 0.59, methionine: 0.13, phenylalanine: 0.47, threonine: 0.37, tryptophan: 0.1, valine: 0.45, vitaminA: 0, vitaminC: 0, vitaminK: 3.3, vitaminB6: 0.07, folate: 149, vitaminE: 0.05, thiamin: 0.24, riboflavin: 0.06, niacin: 0.5, calcium: 27, iron: 2.1, magnesium: 70, zinc: 1.1, potassium: 355, phosphorus: 140, selenium: 1.2, copper: 0.21, manganese: 0.44, omega3: 0.06, omega6: 0.11, fiber: 8.7 }},
      { id: 'kidney-beans', name: 'Kidney Beans (cooked)', category: 'legumes', emoji: 'ü´ò', serving: '100g',
        nutrients: { calories: 127, protein: 8.7, carbs: 22.8, fat: 0.5, histidine: 0.23, isoleucine: 0.36, leucine: 0.66, lysine: 0.57, methionine: 0.12, phenylalanine: 0.45, threonine: 0.35, tryptophan: 0.1, valine: 0.43, vitaminA: 0, vitaminC: 1.2, vitaminK: 8.4, vitaminB6: 0.12, folate: 130, vitaminE: 0.03, thiamin: 0.16, riboflavin: 0.06, niacin: 0.58, calcium: 28, iron: 2.2, magnesium: 45, zinc: 1.0, potassium: 403, phosphorus: 142, selenium: 1.2, copper: 0.24, manganese: 0.48, omega3: 0.08, omega6: 0.11, fiber: 6.4 }},
      { id: 'white-beans', name: 'White Beans (cooked)', category: 'legumes', emoji: 'ü´ò', serving: '100g',
        nutrients: { calories: 139, protein: 9.7, carbs: 25.1, fat: 0.4, histidine: 0.25, isoleucine: 0.4, leucine: 0.72, lysine: 0.62, methionine: 0.11, phenylalanine: 0.49, threonine: 0.38, tryptophan: 0.1, valine: 0.47, vitaminA: 0, vitaminC: 0, vitaminK: 3.5, vitaminB6: 0.14, folate: 102, vitaminE: 0.02, thiamin: 0.15, riboflavin: 0.05, niacin: 0.48, calcium: 90, iron: 3.7, magnesium: 63, zinc: 1.4, potassium: 389, phosphorus: 113, selenium: 2.3, copper: 0.29, manganese: 0.63, omega3: 0.07, omega6: 0.08, fiber: 10.5 }},
      { id: 'tofu', name: 'Tofu (firm)', category: 'legumes', emoji: 'üßà', serving: '100g',
        nutrients: { calories: 144, protein: 17.3, carbs: 2.8, fat: 8.7, histidine: 0.41, isoleucine: 0.79, leucine: 1.26, lysine: 1.05, methionine: 0.21, phenylalanine: 0.81, threonine: 0.66, tryptophan: 0.23, valine: 0.82, vitaminA: 85, vitaminC: 0.1, vitaminK: 2.0, vitaminB6: 0.09, folate: 29, vitaminE: 0.01, thiamin: 0.15, riboflavin: 0.08, niacin: 0.38, calcium: 683, iron: 2.7, magnesium: 58, zinc: 1.6, potassium: 237, phosphorus: 190, selenium: 17.4, copper: 0.4, manganese: 0.6, omega3: 0.58, omega6: 2.87, fiber: 2.3 }},
      { id: 'tempeh', name: 'Tempeh', category: 'legumes', emoji: 'üß±', serving: '100g',
        nutrients: { calories: 192, protein: 20.3, carbs: 7.6, fat: 10.8, histidine: 0.52, isoleucine: 0.93, leucine: 1.49, lysine: 0.99, methionine: 0.24, phenylalanine: 0.96, threonine: 0.79, tryptophan: 0.29, valine: 0.96, vitaminA: 0, vitaminC: 0, vitaminK: 0, vitaminB6: 0.22, folate: 24, vitaminE: 0, thiamin: 0.08, riboflavin: 0.36, niacin: 2.64, calcium: 111, iron: 2.7, magnesium: 81, zinc: 1.1, potassium: 412, phosphorus: 266, selenium: 0, copper: 0.56, manganese: 1.3, omega3: 0.14, omega6: 2.15, fiber: 0 }},
      { id: 'edamame', name: 'Edamame', category: 'legumes', emoji: 'ü´õ', serving: '100g',
        nutrients: { calories: 121, protein: 11.9, carbs: 8.9, fat: 5.2, histidine: 0.33, isoleucine: 0.55, leucine: 0.93, lysine: 0.76, methionine: 0.16, phenylalanine: 0.62, threonine: 0.49, tryptophan: 0.16, valine: 0.57, vitaminA: 15, vitaminC: 6.1, vitaminK: 26.7, vitaminB6: 0.1, folate: 311, vitaminE: 0.72, thiamin: 0.2, riboflavin: 0.16, niacin: 0.93, calcium: 63, iron: 2.3, magnesium: 64, zinc: 1.4, potassium: 436, phosphorus: 169, selenium: 0.9, copper: 0.32, manganese: 1.02, omega3: 0.36, omega6: 1.79, fiber: 5.2 }},
      { id: 'split-peas', name: 'Split Peas (cooked)', category: 'legumes', emoji: 'ü´ò', serving: '100g',
        nutrients: { calories: 118, protein: 8.3, carbs: 21.1, fat: 0.4, histidine: 0.2, isoleucine: 0.36, leucine: 0.62, lysine: 0.6, methionine: 0.09, phenylalanine: 0.42, threonine: 0.31, tryptophan: 0.08, valine: 0.41, vitaminA: 7, vitaminC: 0.4, vitaminK: 5, vitaminB6: 0.05, folate: 65, vitaminE: 0.03, thiamin: 0.19, riboflavin: 0.06, niacin: 0.89, calcium: 14, iron: 1.3, magnesium: 36, zinc: 1.0, potassium: 362, phosphorus: 99, selenium: 0.6, copper: 0.18, manganese: 0.4, omega3: 0.03, omega6: 0.13, fiber: 8.3 }},
      { id: 'mung-beans', name: 'Mung Beans (cooked)', category: 'legumes', emoji: 'ü´ò', serving: '100g',
        nutrients: { calories: 105, protein: 7.0, carbs: 19.2, fat: 0.4, histidine: 0.2, isoleucine: 0.35, leucine: 0.6, lysine: 0.55, methionine: 0.09, phenylalanine: 0.43, threonine: 0.25, tryptophan: 0.07, valine: 0.38, vitaminA: 1, vitaminC: 1, vitaminK: 2.7, vitaminB6: 0.07, folate: 159, vitaminE: 0.15, thiamin: 0.16, riboflavin: 0.06, niacin: 0.58, calcium: 27, iron: 1.4, magnesium: 48, zinc: 0.8, potassium: 266, phosphorus: 99, selenium: 2.5, copper: 0.16, manganese: 0.3, omega3: 0.02, omega6: 0.09, fiber: 7.6 }},

      // === GRAINS ===
      { id: 'quinoa', name: 'Quinoa (cooked)', category: 'grains', emoji: 'üåæ', serving: '100g',
        nutrients: { calories: 120, protein: 4.4, carbs: 21.3, fat: 1.9, histidine: 0.15, isoleucine: 0.18, leucine: 0.3, lysine: 0.27, methionine: 0.09, phenylalanine: 0.19, threonine: 0.15, tryptophan: 0.05, valine: 0.21, vitaminA: 5, vitaminC: 0, vitaminK: 0, vitaminB6: 0.12, folate: 42, vitaminE: 0.63, thiamin: 0.11, riboflavin: 0.11, niacin: 0.41, calcium: 17, iron: 1.5, magnesium: 64, zinc: 1.1, potassium: 172, phosphorus: 152, selenium: 2.8, copper: 0.19, manganese: 0.63, omega3: 0.05, omega6: 1.03, fiber: 2.8 }},
      { id: 'brown-rice', name: 'Brown Rice (cooked)', category: 'grains', emoji: 'üçö', serving: '100g',
        nutrients: { calories: 112, protein: 2.6, carbs: 23.5, fat: 0.9, histidine: 0.07, isoleucine: 0.1, leucine: 0.2, lysine: 0.09, methionine: 0.05, phenylalanine: 0.13, threonine: 0.09, tryptophan: 0.03, valine: 0.14, vitaminA: 0, vitaminC: 0, vitaminK: 0.6, vitaminB6: 0.15, folate: 4, vitaminE: 0.04, thiamin: 0.1, riboflavin: 0.03, niacin: 1.53, calcium: 10, iron: 0.5, magnesium: 44, zinc: 0.6, potassium: 79, phosphorus: 83, selenium: 9.8, copper: 0.1, manganese: 0.9, omega3: 0.01, omega6: 0.32, fiber: 1.8 }},
      { id: 'oats', name: 'Oats (cooked)', category: 'grains', emoji: 'ü•£', serving: '100g',
        nutrients: { calories: 71, protein: 2.5, carbs: 12, fat: 1.5, histidine: 0.05, isoleucine: 0.08, leucine: 0.15, lysine: 0.08, methionine: 0.03, phenylalanine: 0.1, threonine: 0.07, tryptophan: 0.03, valine: 0.11, vitaminA: 0, vitaminC: 0, vitaminK: 0.2, vitaminB6: 0.04, folate: 6, vitaminE: 0.08, thiamin: 0.08, riboflavin: 0.02, niacin: 0.23, calcium: 9, iron: 0.9, magnesium: 27, zinc: 1.0, potassium: 70, phosphorus: 77, selenium: 5.4, copper: 0.08, manganese: 0.6, omega3: 0.01, omega6: 0.43, fiber: 1.7 }},
      { id: 'buckwheat', name: 'Buckwheat (cooked)', category: 'grains', emoji: 'üåæ', serving: '100g',
        nutrients: { calories: 92, protein: 3.4, carbs: 19.9, fat: 0.6, histidine: 0.09, isoleucine: 0.13, leucine: 0.22, lysine: 0.18, methionine: 0.06, phenylalanine: 0.14, threonine: 0.13, tryptophan: 0.05, valine: 0.17, vitaminA: 0, vitaminC: 0, vitaminK: 1.9, vitaminB6: 0.08, folate: 14, vitaminE: 0.09, thiamin: 0.04, riboflavin: 0.04, niacin: 0.94, calcium: 7, iron: 0.8, magnesium: 51, zinc: 0.6, potassium: 88, phosphorus: 70, selenium: 2.2, copper: 0.15, manganese: 0.4, omega3: 0.02, omega6: 0.22, fiber: 2.7 }},
      { id: 'millet', name: 'Millet (cooked)', category: 'grains', emoji: 'üåæ', serving: '100g',
        nutrients: { calories: 119, protein: 3.5, carbs: 23.7, fat: 1.0, histidine: 0.08, isoleucine: 0.15, leucine: 0.42, lysine: 0.06, methionine: 0.08, phenylalanine: 0.19, threonine: 0.12, tryptophan: 0.04, valine: 0.19, vitaminA: 0, vitaminC: 0, vitaminK: 0.3, vitaminB6: 0.11, folate: 19, vitaminE: 0.03, thiamin: 0.11, riboflavin: 0.08, niacin: 1.33, calcium: 3, iron: 0.6, magnesium: 44, zinc: 0.9, potassium: 62, phosphorus: 100, selenium: 0.9, copper: 0.16, manganese: 0.27, omega3: 0.01, omega6: 0.48, fiber: 1.3 }},
      { id: 'barley', name: 'Barley (cooked)', category: 'grains', emoji: 'üåæ', serving: '100g',
        nutrients: { calories: 123, protein: 2.3, carbs: 28.2, fat: 0.4, histidine: 0.05, isoleucine: 0.08, leucine: 0.15, lysine: 0.08, methionine: 0.04, phenylalanine: 0.12, threonine: 0.07, tryptophan: 0.03, valine: 0.11, vitaminA: 7, vitaminC: 0, vitaminK: 0.8, vitaminB6: 0.07, folate: 16, vitaminE: 0.02, thiamin: 0.08, riboflavin: 0.06, niacin: 2.06, calcium: 11, iron: 1.3, magnesium: 22, zinc: 0.8, potassium: 93, phosphorus: 54, selenium: 8.6, copper: 0.1, manganese: 0.26, omega3: 0.01, omega6: 0.16, fiber: 3.8 }},
      { id: 'bulgur', name: 'Bulgur (cooked)', category: 'grains', emoji: 'üåæ', serving: '100g',
        nutrients: { calories: 83, protein: 3.1, carbs: 18.6, fat: 0.2, histidine: 0.07, isoleucine: 0.11, leucine: 0.2, lysine: 0.08, methionine: 0.05, phenylalanine: 0.14, threonine: 0.09, tryptophan: 0.04, valine: 0.13, vitaminA: 0, vitaminC: 0, vitaminK: 0.5, vitaminB6: 0.08, folate: 18, vitaminE: 0.01, thiamin: 0.06, riboflavin: 0.03, niacin: 1.0, calcium: 10, iron: 0.96, magnesium: 32, zinc: 0.57, potassium: 68, phosphorus: 40, selenium: 0.6, copper: 0.07, manganese: 0.61, omega3: 0.01, omega6: 0.08, fiber: 4.5 }},
      { id: 'amaranth', name: 'Amaranth (cooked)', category: 'grains', emoji: 'üåæ', serving: '100g',
        nutrients: { calories: 102, protein: 3.8, carbs: 18.7, fat: 1.6, histidine: 0.1, isoleucine: 0.14, leucine: 0.24, lysine: 0.21, methionine: 0.06, phenylalanine: 0.17, threonine: 0.14, tryptophan: 0.04, valine: 0.17, vitaminA: 0, vitaminC: 0, vitaminK: 0, vitaminB6: 0.11, folate: 22, vitaminE: 0.19, thiamin: 0.01, riboflavin: 0.02, niacin: 0.24, calcium: 47, iron: 2.1, magnesium: 65, zinc: 0.86, potassium: 135, phosphorus: 148, selenium: 5.5, copper: 0.15, manganese: 0.85, omega3: 0.03, omega6: 0.69, fiber: 2.1 }},
      { id: 'wild-rice', name: 'Wild Rice (cooked)', category: 'grains', emoji: 'üçö', serving: '100g',
        nutrients: { calories: 101, protein: 4.0, carbs: 21.3, fat: 0.3, histidine: 0.1, isoleucine: 0.18, leucine: 0.29, lysine: 0.17, methionine: 0.12, phenylalanine: 0.21, threonine: 0.15, tryptophan: 0.06, valine: 0.23, vitaminA: 3, vitaminC: 0, vitaminK: 0.5, vitaminB6: 0.14, folate: 26, vitaminE: 0.24, thiamin: 0.05, riboflavin: 0.09, niacin: 1.29, calcium: 3, iron: 0.6, magnesium: 32, zinc: 1.34, potassium: 101, phosphorus: 82, selenium: 0.9, copper: 0.12, manganese: 0.35, omega3: 0.02, omega6: 0.12, fiber: 1.8 }},
      { id: 'couscous', name: 'Couscous (cooked)', category: 'grains', emoji: 'üåæ', serving: '100g',
        nutrients: { calories: 112, protein: 3.8, carbs: 23.2, fat: 0.2, histidine: 0.08, isoleucine: 0.14, leucine: 0.26, lysine: 0.08, methionine: 0.06, phenylalanine: 0.19, threonine: 0.11, tryptophan: 0.05, valine: 0.16, vitaminA: 0, vitaminC: 0, vitaminK: 0, vitaminB6: 0.05, folate: 15, vitaminE: 0.01, thiamin: 0.06, riboflavin: 0.03, niacin: 0.98, calcium: 8, iron: 0.4, magnesium: 8, zinc: 0.26, potassium: 58, phosphorus: 22, selenium: 27.5, copper: 0.04, manganese: 0.08, omega3: 0.01, omega6: 0.06, fiber: 1.4 }},

      // === NUTS & SEEDS ===
      { id: 'tahini', name: 'Tahini (Abbaya)', category: 'nuts-seeds', emoji: '‚≠ê', serving: '100g',
        nutrients: { calories: 595, protein: 17.0, carbs: 21.2, fat: 53.8, histidine: 0.47, isoleucine: 0.69, leucine: 1.24, lysine: 0.49, methionine: 0.53, phenylalanine: 0.84, threonine: 0.67, tryptophan: 0.34, valine: 0.89, vitaminA: 3, vitaminC: 0, vitaminK: 0, vitaminB6: 0.15, folate: 98, vitaminE: 0.25, thiamin: 1.22, riboflavin: 0.47, niacin: 5.45, calcium: 426, iron: 8.95, magnesium: 95, zinc: 4.62, potassium: 414, phosphorus: 732, selenium: 34.4, copper: 1.65, manganese: 1.46, omega3: 0.04, omega6: 21.8, fiber: 9.3 }},
      { id: 'almonds', name: 'Almonds', category: 'nuts-seeds', emoji: 'ü•ú', serving: '100g',
        nutrients: { calories: 579, protein: 21.2, carbs: 21.6, fat: 49.9, histidine: 0.55, isoleucine: 0.75, leucine: 1.47, lysine: 0.58, methionine: 0.16, phenylalanine: 1.13, threonine: 0.6, tryptophan: 0.21, valine: 0.86, vitaminA: 0, vitaminC: 0, vitaminK: 0, vitaminB6: 0.14, folate: 44, vitaminE: 25.6, thiamin: 0.2, riboflavin: 1.14, niacin: 3.62, calcium: 269, iron: 3.7, magnesium: 270, zinc: 3.1, potassium: 733, phosphorus: 481, selenium: 4.1, copper: 1.03, manganese: 2.18, omega3: 0, omega6: 12.3, fiber: 12.5 }},
      { id: 'walnuts', name: 'Walnuts', category: 'nuts-seeds', emoji: 'ü•ú', serving: '100g',
        nutrients: { calories: 654, protein: 15.2, carbs: 13.7, fat: 65.2, histidine: 0.39, isoleucine: 0.63, leucine: 1.17, lysine: 0.42, methionine: 0.24, phenylalanine: 0.71, threonine: 0.6, tryptophan: 0.17, valine: 0.75, vitaminA: 1, vitaminC: 1.3, vitaminK: 2.7, vitaminB6: 0.54, folate: 98, vitaminE: 0.7, thiamin: 0.34, riboflavin: 0.15, niacin: 1.13, calcium: 98, iron: 2.9, magnesium: 158, zinc: 3.1, potassium: 441, phosphorus: 346, selenium: 4.9, copper: 1.59, manganese: 3.41, omega3: 9.08, omega6: 38.1, fiber: 6.7 }},
      { id: 'cashews', name: 'Cashews', category: 'nuts-seeds', emoji: 'ü•ú', serving: '100g',
        nutrients: { calories: 553, protein: 18.2, carbs: 30.2, fat: 43.9, histidine: 0.46, isoleucine: 0.79, leucine: 1.47, lysine: 0.93, methionine: 0.28, phenylalanine: 0.94, threonine: 0.69, tryptophan: 0.29, valine: 1.09, vitaminA: 0, vitaminC: 0, vitaminK: 34.1, vitaminB6: 0.42, folate: 25, vitaminE: 0.9, thiamin: 0.42, riboflavin: 0.06, niacin: 1.06, calcium: 37, iron: 6.7, magnesium: 292, zinc: 5.8, potassium: 660, phosphorus: 593, selenium: 19.9, copper: 2.2, manganese: 1.66, omega3: 0.06, omega6: 7.78, fiber: 3.3 }},
      { id: 'peanuts', name: 'Peanuts', category: 'nuts-seeds', emoji: 'ü•ú', serving: '100g',
        nutrients: { calories: 567, protein: 25.8, carbs: 16.1, fat: 49.2, histidine: 0.65, isoleucine: 0.91, leucine: 1.67, lysine: 0.93, methionine: 0.32, phenylalanine: 1.34, threonine: 0.88, tryptophan: 0.25, valine: 1.08, vitaminA: 0, vitaminC: 0, vitaminK: 0, vitaminB6: 0.35, folate: 240, vitaminE: 8.3, thiamin: 0.64, riboflavin: 0.14, niacin: 12.07, calcium: 92, iron: 4.6, magnesium: 168, zinc: 3.3, potassium: 705, phosphorus: 376, selenium: 7.2, copper: 1.14, manganese: 1.93, omega3: 0, omega6: 15.6, fiber: 8.5 }},
      { id: 'pistachios', name: 'Pistachios', category: 'nuts-seeds', emoji: 'ü•ú', serving: '100g',
        nutrients: { calories: 560, protein: 20.2, carbs: 27.2, fat: 45.3, histidine: 0.51, isoleucine: 0.89, leucine: 1.6, lysine: 1.14, methionine: 0.34, phenylalanine: 1.09, threonine: 0.68, tryptophan: 0.25, valine: 1.26, vitaminA: 26, vitaminC: 5.6, vitaminK: 13.2, vitaminB6: 1.7, folate: 51, vitaminE: 2.9, thiamin: 0.87, riboflavin: 0.16, niacin: 1.3, calcium: 105, iron: 3.9, magnesium: 121, zinc: 2.2, potassium: 1025, phosphorus: 490, selenium: 7, copper: 1.3, manganese: 1.2, omega3: 0.26, omega6: 13.6, fiber: 10.6 }},
      { id: 'brazil-nuts', name: 'Brazil Nuts', category: 'nuts-seeds', emoji: 'ü•ú', serving: '100g',
        nutrients: { calories: 656, protein: 14.3, carbs: 11.7, fat: 66.4, histidine: 0.41, isoleucine: 0.52, leucine: 1.19, lysine: 0.49,
        methionine: 1.01, phenylalanine: 0.63, threonine: 0.37, tryptophan: 0.14, valine: 0.76, vitaminA: 0, vitaminC: 0.7, vitaminK: 0, vitaminB6: 0.1, folate: 22, vitaminE: 5.7, thiamin: 0.62, riboflavin: 0.04, niacin: 0.3, calcium: 160, iron: 2.4, magnesium: 376, zinc: 4.1, potassium: 659, phosphorus: 725, selenium: 1917, copper: 1.74, manganese: 1.22, omega3: 0.02, omega6: 20.6, fiber: 7.5 }},
      { id: 'sunflower-seeds', name: 'Sunflower Seeds', category: 'nuts-seeds', emoji: 'üåª', serving: '100g',
        nutrients: { calories: 584, protein: 20.8, carbs: 20, fat: 51.5, histidine: 0.63, isoleucine: 0.94, leucine: 1.66, lysine: 0.94, methionine: 0.49, phenylalanine: 1.17, threonine: 0.93, tryptophan: 0.35, valine: 1.32, vitaminA: 3, vitaminC: 1.4, vitaminK: 0, vitaminB6: 1.35, folate: 227, vitaminE: 35.2, thiamin: 1.48, riboflavin: 0.36, niacin: 8.34, calcium: 78, iron: 5.3, magnesium: 325, zinc: 5.0, potassium: 645, phosphorus: 660, selenium: 53, copper: 1.8, manganese: 1.95, omega3: 0.07, omega6: 23.1, fiber: 8.6 }},
      { id: 'pumpkin-seeds', name: 'Pumpkin Seeds', category: 'nuts-seeds', emoji: 'üéÉ', serving: '100g',
        nutrients: { calories: 559, protein: 30.2, carbs: 10.7, fat: 49.1, histidine: 0.78, isoleucine: 1.28, leucine: 2.42, lysine: 1.24, methionine: 0.6, phenylalanine: 1.73, threonine: 1.0, tryptophan: 0.58, valine: 1.58, vitaminA: 16, vitaminC: 1.9, vitaminK: 7.3, vitaminB6: 0.14, folate: 58, vitaminE: 2.2, thiamin: 0.27, riboflavin: 0.15, niacin: 4.99, calcium: 46, iron: 8.8, magnesium: 592, zinc: 7.8, potassium: 809, phosphorus: 1233, selenium: 9.4, copper: 1.34, manganese: 4.54, omega3: 0.12, omega6: 20.7, fiber: 6.0 }},
      { id: 'chia-seeds', name: 'Chia Seeds', category: 'nuts-seeds', emoji: 'üå±', serving: '100g',
        nutrients: { calories: 486, protein: 16.5, carbs: 42.1, fat: 30.7, histidine: 0.53, isoleucine: 0.7, leucine: 1.18, lysine: 0.88, methionine: 0.59, phenylalanine: 0.92, threonine: 0.67, tryptophan: 0.44, valine: 0.95, vitaminA: 54, vitaminC: 1.6, vitaminK: 0, vitaminB6: 0, folate: 49, vitaminE: 0.5, thiamin: 0.62, riboflavin: 0.17, niacin: 8.83, calcium: 631, iron: 7.7, magnesium: 335, zinc: 4.6, potassium: 407, phosphorus: 860, selenium: 55.2, copper: 0.92, manganese: 2.72, omega3: 17.8, omega6: 5.84, fiber: 34.4 }},
      { id: 'flaxseeds', name: 'Flaxseeds', category: 'nuts-seeds', emoji: 'üå±', serving: '100g',
        nutrients: { calories: 534, protein: 18.3, carbs: 28.9, fat: 42.2, histidine: 0.47, isoleucine: 0.82, leucine: 1.24, lysine: 0.81, methionine: 0.37, phenylalanine: 0.96, threonine: 0.77, tryptophan: 0.3, valine: 1.07, vitaminA: 0, vitaminC: 0.6, vitaminK: 4.3, vitaminB6: 0.47, folate: 87, vitaminE: 0.31, thiamin: 1.64, riboflavin: 0.16, niacin: 3.08, calcium: 255, iron: 5.7, magnesium: 392, zinc: 4.3, potassium: 813, phosphorus: 642, selenium: 25.4, copper: 1.22, manganese: 2.48, omega3: 22.8, omega6: 5.9, fiber: 27.3 }},
      { id: 'hemp-seeds', name: 'Hemp Seeds', category: 'nuts-seeds', emoji: 'üå±', serving: '100g',
        nutrients: { calories: 553, protein: 31.6, carbs: 8.7, fat: 48.8, histidine: 0.97, isoleucine: 1.29, leucine: 2.16, lysine: 1.27, methionine: 0.93, phenylalanine: 1.45, threonine: 1.15, tryptophan: 0.37, valine: 1.6, vitaminA: 11, vitaminC: 0.5, vitaminK: 0, vitaminB6: 0.6, folate: 110, vitaminE: 0.8, thiamin: 1.28, riboflavin: 0.29, niacin: 9.2, calcium: 70, iron: 7.95, magnesium: 700, zinc: 9.9, potassium: 1200, phosphorus: 1650, selenium: 0, copper: 1.6, manganese: 7.6, omega3: 8.68, omega6: 28.7, fiber: 4.0 }},
      { id: 'sesame-seeds', name: 'Sesame Seeds', category: 'nuts-seeds', emoji: 'üå±', serving: '100g',
        nutrients: { calories: 573, protein: 17.7, carbs: 23.4, fat: 49.7, histidine: 0.52, isoleucine: 0.75, leucine: 1.36, lysine: 0.57, methionine: 0.59, phenylalanine: 0.94, threonine: 0.74, tryptophan: 0.39, valine: 0.98, vitaminA: 9, vitaminC: 0, vitaminK: 0, vitaminB6: 0.79, folate: 97, vitaminE: 0.25, thiamin: 0.79, riboflavin: 0.25, niacin: 4.52, calcium: 975, iron: 14.6, magnesium: 351, zinc: 7.75, potassium: 468, phosphorus: 629, selenium: 34.4, copper: 4.08, manganese: 2.46, omega3: 0.38, omega6: 21.4, fiber: 11.8 }},

      // === VEGETABLES ===
      { id: 'spinach', name: 'Spinach (raw)', category: 'vegetables', emoji: 'ü•¨', serving: '100g',
        nutrients: { calories: 23, protein: 2.9, carbs: 3.6, fat: 0.4, histidine: 0.06, isoleucine: 0.15, leucine: 0.22, lysine: 0.17, methionine: 0.05, phenylalanine: 0.13, threonine: 0.12, tryptophan: 0.04, valine: 0.16, vitaminA: 469, vitaminC: 28.1, vitaminK: 483, vitaminB6: 0.2, folate: 194, vitaminE: 2.0, thiamin: 0.08, riboflavin: 0.19, niacin: 0.72, calcium: 99, iron: 2.7, magnesium: 79, zinc: 0.5, potassium: 558, phosphorus: 49, selenium: 1.0, copper: 0.13, manganese: 0.9, omega3: 0.14, omega6: 0.03, fiber: 2.2 }},
      { id: 'kale', name: 'Kale (raw)', category: 'vegetables', emoji: 'ü•¨', serving: '100g',
        nutrients: { calories: 49, protein: 4.3, carbs: 8.8, fat: 0.9, histidine: 0.08, isoleucine: 0.22, leucine: 0.29, lysine: 0.24, methionine: 0.04, phenylalanine: 0.19, threonine: 0.16, tryptophan: 0.05, valine: 0.21, vitaminA: 500, vitaminC: 120, vitaminK: 817, vitaminB6: 0.27, folate: 141, vitaminE: 1.5, thiamin: 0.11, riboflavin: 0.13, niacin: 1.0, calcium: 150, iron: 1.5, magnesium: 47, zinc: 0.6, potassium: 491, phosphorus: 92, selenium: 0.9, copper: 1.5, manganese: 0.66, omega3: 0.18, omega6: 0.14, fiber: 3.6 }},
      { id: 'broccoli', name: 'Broccoli (raw)', category: 'vegetables', emoji: 'ü•¶', serving: '100g',
        nutrients: { calories: 34, protein: 2.8, carbs: 6.6, fat: 0.4, histidine: 0.06, isoleucine: 0.08, leucine: 0.13, lysine: 0.14, methionine: 0.04, phenylalanine: 0.09, threonine: 0.09, tryptophan: 0.03, valine: 0.13, vitaminA: 31, vitaminC: 89.2, vitaminK: 102, vitaminB6: 0.18, folate: 63, vitaminE: 0.78, thiamin: 0.07, riboflavin: 0.12, niacin: 0.64, calcium: 47, iron: 0.7, magnesium: 21, zinc: 0.4, potassium: 316, phosphorus: 66, selenium: 2.5, copper: 0.05, manganese: 0.21, omega3: 0.02, omega6: 0.02, fiber: 2.6 }},
      { id: 'brussels-sprouts', name: 'Brussels Sprouts', category: 'vegetables', emoji: 'ü•¨', serving: '100g',
        nutrients: { calories: 43, protein: 3.4, carbs: 8.9, fat: 0.3, histidine: 0.07, isoleucine: 0.13, leucine: 0.18, lysine: 0.16, methionine: 0.03, phenylalanine: 0.11, threonine: 0.12, tryptophan: 0.03, valine: 0.16, vitaminA: 38, vitaminC: 85, vitaminK: 177, vitaminB6: 0.22, folate: 61, vitaminE: 0.88, thiamin: 0.14, riboflavin: 0.09, niacin: 0.75, calcium: 42, iron: 1.4, magnesium: 23, zinc: 0.4, potassium: 389, phosphorus: 69, selenium: 1.6, copper: 0.07, manganese: 0.34, omega3: 0.1, omega6: 0.05, fiber: 3.8 }},
      { id: 'sweet-potato', name: 'Sweet Potato (baked)', category: 'vegetables', emoji: 'üç†', serving: '100g',
        nutrients: { calories: 90, protein: 2.0, carbs: 20.7, fat: 0.1, histidine: 0.03, isoleucine: 0.06, leucine: 0.09, lysine: 0.06, methionine: 0.03, phenylalanine: 0.08, threonine: 0.06, tryptophan: 0.02, valine: 0.08, vitaminA: 961, vitaminC: 19.6, vitaminK: 2.3, vitaminB6: 0.29, folate: 6, vitaminE: 0.71, thiamin: 0.11, riboflavin: 0.11, niacin: 1.49, calcium: 38, iron: 0.7, magnesium: 27, zinc: 0.3, potassium: 475, phosphorus: 54, selenium: 0.2, copper: 0.16, manganese: 0.5, omega3: 0, omega6: 0.01, fiber: 3.3 }},
      { id: 'carrots', name: 'Carrots (raw)', category: 'vegetables', emoji: 'ü•ï', serving: '100g',
        nutrients: { calories: 41, protein: 0.9, carbs: 9.6, fat: 0.2, histidine: 0.02, isoleucine: 0.04, leucine: 0.05, lysine: 0.05, methionine: 0.01, phenylalanine: 0.04, threonine: 0.04, tryptophan: 0.01, valine: 0.05, vitaminA: 835, vitaminC: 5.9, vitaminK: 13.2, vitaminB6: 0.14, folate: 19, vitaminE: 0.66, thiamin: 0.07, riboflavin: 0.06, niacin: 0.98, calcium: 33, iron: 0.3, magnesium: 12, zinc: 0.2, potassium: 320, phosphorus: 35, selenium: 0.1, copper: 0.05, manganese: 0.14, omega3: 0, omega6: 0.12, fiber: 2.8 }},
      { id: 'bell-pepper-red', name: 'Bell Pepper (red)', category: 'vegetables', emoji: 'ü´ë', serving: '100g',
        nutrients: { calories: 31, protein: 1.0, carbs: 6.0, fat: 0.3, histidine: 0.02, isoleucine: 0.03, leucine: 0.05, lysine: 0.04, methionine: 0.01, phenylalanine: 0.03, threonine: 0.03, tryptophan: 0.01, valine: 0.04, vitaminA: 157, vitaminC: 128, vitaminK: 4.9, vitaminB6: 0.29, folate: 46, vitaminE: 1.58, thiamin: 0.05, riboflavin: 0.09, niacin: 0.98, calcium: 7, iron: 0.4, magnesium: 12, zinc: 0.3, potassium: 211, phosphorus: 26, selenium: 0.1, copper: 0.02, manganese: 0.11, omega3: 0.03, omega6: 0.06, fiber: 2.1 }},
      { id: 'tomatoes', name: 'Tomatoes (raw)', category: 'vegetables', emoji: 'üçÖ', serving: '100g',
        nutrients: { calories: 18, protein: 0.9, carbs: 3.9, fat: 0.2, histidine: 0.01, isoleucine: 0.02, leucine: 0.03, lysine: 0.03, methionine: 0.01, phenylalanine: 0.02, threonine: 0.02, tryptophan: 0.01, valine: 0.02, vitaminA: 42, vitaminC: 13.7, vitaminK: 7.9, vitaminB6: 0.08, folate: 15, vitaminE: 0.54, thiamin: 0.04, riboflavin: 0.02, niacin: 0.59, calcium: 10, iron: 0.3, magnesium: 11, zinc: 0.2, potassium: 237, phosphorus: 24, selenium: 0, copper: 0.06, manganese: 0.11, omega3: 0, omega6: 0.08, fiber: 1.2 }},
      { id: 'avocado', name: 'Avocado', category: 'vegetables', emoji: 'ü•ë', serving: '100g',
        nutrients: { calories: 160, protein: 2.0, carbs: 8.5, fat: 14.7, histidine: 0.05, isoleucine: 0.08, leucine: 0.14, lysine: 0.13, methionine: 0.04, phenylalanine: 0.1, threonine: 0.07, tryptophan: 0.03, valine: 0.11, vitaminA: 7, vitaminC: 10, vitaminK: 21, vitaminB6: 0.26, folate: 81, vitaminE: 2.07, thiamin: 0.07, riboflavin: 0.13, niacin: 1.74, calcium: 12, iron: 0.6, magnesium: 29, zinc: 0.6, potassium: 485, phosphorus: 52, selenium: 0.4, copper: 0.19, manganese: 0.14, omega3: 0.11, omega6: 1.69, fiber: 6.7 }},
      { id: 'mushrooms', name: 'Mushrooms (white)', category: 'vegetables', emoji: 'üçÑ', serving: '100g',
        nutrients: { calories: 22, protein: 3.1, carbs: 3.3, fat: 0.3, histidine: 0.06, isoleucine: 0.08, leucine: 0.12, lysine: 0.11, methionine: 0.03, phenylalanine: 0.09, threonine: 0.11, tryptophan: 0.04, valine: 0.1, vitaminA: 0, vitaminC: 2.1, vitaminK: 0, vitaminB6: 0.1, folate: 17, vitaminE: 0.01, thiamin: 0.08, riboflavin: 0.4, niacin: 3.61, calcium: 3, iron: 0.5, magnesium: 9, zinc: 0.5, potassium: 318, phosphorus: 86, selenium: 9.3, copper: 0.32, manganese: 0.05, omega3: 0, omega6: 0.16, fiber: 1.0 }},
      { id: 'peas', name: 'Green Peas (raw)', category: 'vegetables', emoji: 'ü´õ', serving: '100g',
        nutrients: { calories: 81, protein: 5.4, carbs: 14.5, fat: 0.4, histidine: 0.11, isoleucine: 0.2, leucine: 0.32, lysine: 0.32, methionine: 0.08, phenylalanine: 0.2, threonine: 0.2, tryptophan: 0.04, valine: 0.24, vitaminA: 38, vitaminC: 40, vitaminK: 24.8, vitaminB6: 0.17, folate: 65, vitaminE: 0.13, thiamin: 0.27, riboflavin: 0.13, niacin: 2.09, calcium: 25, iron: 1.5, magnesium: 33, zinc: 1.2, potassium: 244, phosphorus: 108, selenium: 1.8, copper: 0.18, manganese: 0.41, omega3: 0.03, omega6: 0.19, fiber: 5.7 }},
      { id: 'asparagus', name: 'Asparagus (raw)', category: 'vegetables', emoji: 'üå±', serving: '100g',
        nutrients: { calories: 20, protein: 2.2, carbs: 3.9, fat: 0.1, histidine: 0.05, isoleucine: 0.07, leucine: 0.13, lysine: 0.1, methionine: 0.03, phenylalanine: 0.08, threonine: 0.08, tryptophan: 0.03, valine: 0.12, vitaminA: 38, vitaminC: 5.6, vitaminK: 41.6, vitaminB6: 0.09, folate: 52, vitaminE: 1.13, thiamin: 0.14, riboflavin: 0.14, niacin: 0.98, calcium: 24, iron: 2.1, magnesium: 14, zinc: 0.5, potassium: 202, phosphorus: 52, selenium: 2.3, copper: 0.19, manganese: 0.16, omega3: 0.01, omega6: 0, fiber: 2.1 }},
      { id: 'cauliflower', name: 'Cauliflower (raw)', category: 'vegetables', emoji: 'ü•¶', serving: '100g',
        nutrients: { calories: 25, protein: 1.9, carbs: 5.0, fat: 0.3, histidine: 0.04, isoleucine: 0.07, leucine: 0.11, lysine: 0.1, methionine: 0.03, phenylalanine: 0.07, threonine: 0.07, tryptophan: 0.02, valine: 0.1, vitaminA: 0, vitaminC: 48.2, vitaminK: 15.5, vitaminB6: 0.18, folate: 57, vitaminE: 0.08, thiamin: 0.05, riboflavin: 0.06, niacin: 0.51, calcium: 22, iron: 0.4, magnesium: 15, zinc: 0.3, potassium: 299, phosphorus: 44, selenium: 0.6, copper: 0.04, manganese: 0.16, omega3: 0.02, omega6: 0.02, fiber: 2.0 }},
      { id: 'zucchini', name: 'Zucchini (raw)', category: 'vegetables', emoji: 'ü•í', serving: '100g',
        nutrients: { calories: 17, protein: 1.2, carbs: 3.1, fat: 0.3, histidine: 0.03, isoleucine: 0.04, leucine: 0.07, lysine: 0.07, methionine: 0.02, phenylalanine: 0.04, threonine: 0.03, tryptophan: 0.01, valine: 0.05, vitaminA: 10, vitaminC: 17.9, vitaminK: 4.3, vitaminB6: 0.16, folate: 24, vitaminE: 0.12, thiamin: 0.05, riboflavin: 0.09, niacin: 0.45, calcium: 16, iron: 0.4, magnesium: 18, zinc: 0.3, potassium: 261, phosphorus: 38, selenium: 0.2, copper: 0.05, manganese: 0.18, omega3: 0.03, omega6: 0.03, fiber: 1.0 }},
      { id: 'beets', name: 'Beets (raw)', category: 'vegetables', emoji: 'üü£', serving: '100g',
        nutrients: { calories: 43, protein: 1.6, carbs: 9.6, fat: 0.2, histidine: 0.02, isoleucine: 0.05, leucine: 0.07, lysine: 0.06, methionine: 0.02, phenylalanine: 0.05, threonine: 0.05, tryptophan: 0.01, valine: 0.06, vitaminA: 2, vitaminC: 4.9, vitaminK: 0.2, vitaminB6: 0.07, folate: 109, vitaminE: 0.04, thiamin: 0.03, riboflavin: 0.04, niacin: 0.33, calcium: 16, iron: 0.8, magnesium: 23, zinc: 0.4, potassium: 325, phosphorus: 40, selenium: 0.7, copper: 0.08, manganese: 0.33, omega3: 0.01, omega6: 0.06, fiber: 2.8 }},

      // === FRUITS ===
      { id: 'banana', name: 'Banana', category: 'fruits', emoji: 'üçå', serving: '100g',
        nutrients: { calories: 89, protein: 1.1, carbs: 22.8, fat: 0.3, histidine: 0.08, isoleucine: 0.03, leucine: 0.07, lysine: 0.05, methionine: 0.01, phenylalanine: 0.05, threonine: 0.03, tryptophan: 0.01, valine: 0.05, vitaminA: 3, vitaminC: 8.7, vitaminK: 0.5, vitaminB6: 0.37, folate: 20, vitaminE: 0.1, thiamin: 0.03, riboflavin: 0.07, niacin: 0.67, calcium: 5, iron: 0.3, magnesium: 27, zinc: 0.2, potassium: 358, phosphorus: 22, selenium: 1, copper: 0.08, manganese: 0.27, omega3: 0.03, omega6: 0.05, fiber: 2.6 }},
      { id: 'orange', name: 'Orange', category: 'fruits', emoji: 'üçä', serving: '100g',
        nutrients: { calories: 47, protein: 0.9, carbs: 11.8, fat: 0.1, histidine: 0.02, isoleucine: 0.03, leucine: 0.02, lysine: 0.05, methionine: 0.02, phenylalanine: 0.03, threonine: 0.02, tryptophan: 0.01, valine: 0.04, vitaminA: 11, vitaminC: 53.2, vitaminK: 0, vitaminB6: 0.06, folate: 30, vitaminE: 0.18, thiamin: 0.09, riboflavin: 0.04, niacin: 0.28, calcium: 40, iron: 0.1, magnesium: 10, zinc: 0.1, potassium: 181, phosphorus: 14, selenium: 0.5, copper: 0.05, manganese: 0.03, omega3: 0.01, omega6: 0.02, fiber: 2.4 }},
      { id: 'blueberries', name: 'Blueberries', category: 'fruits', emoji: 'ü´ê', serving: '100g',
        nutrients: { calories: 57, protein: 0.7, carbs: 14.5, fat: 0.3, histidine: 0.01, isoleucine: 0.02, leucine: 0.04, lysine: 0.01, methionine: 0.01, phenylalanine: 0.03, threonine: 0.02, tryptophan: 0, valine: 0.03, vitaminA: 3, vitaminC: 9.7, vitaminK: 19.3, vitaminB6: 0.05, folate: 6, vitaminE: 0.57, thiamin: 0.04, riboflavin: 0.04, niacin: 0.42, calcium: 6, iron: 0.3, magnesium: 6, zinc: 0.2, potassium: 77, phosphorus: 12, selenium: 0.1, copper: 0.06, manganese: 0.34, omega3: 0.06, omega6: 0.09, fiber: 2.4 }},
      { id: 'strawberries', name: 'Strawberries', category: 'fruits', emoji: 'üçì', serving: '100g',
        nutrients: { calories: 32, protein: 0.7, carbs: 7.7, fat: 0.3, histidine: 0.01, isoleucine: 0.02, leucine: 0.03, lysine: 0.03, methionine: 0.01, phenylalanine: 0.02, threonine: 0.02, tryptophan: 0.01, valine: 0.02, vitaminA: 1, vitaminC: 58.8, vitaminK: 2.2, vitaminB6: 0.05, folate: 24, vitaminE: 0.29, thiamin: 0.02, riboflavin: 0.02, niacin: 0.39, calcium: 16, iron: 0.4, magnesium: 13, zinc: 0.1, potassium: 153, phosphorus: 24, selenium: 0.4, copper: 0.05, manganese: 0.39, omega3: 0.07, omega6: 0.09, fiber: 2.0 }},
      { id: 'mango', name: 'Mango', category: 'fruits', emoji: 'ü•≠', serving: '100g',
        nutrients: { calories: 60, protein: 0.8, carbs: 15, fat: 0.4, histidine: 0.01, isoleucine: 0.03, leucine: 0.05, lysine: 0.07, methionine: 0.01, phenylalanine: 0.03, threonine: 0.03, tryptophan: 0.01, valine: 0.04, vitaminA: 54, vitaminC: 36.4, vitaminK: 4.2, vitaminB6: 0.12, folate: 43, vitaminE: 0.9, thiamin: 0.03, riboflavin: 0.04, niacin: 0.67, calcium: 11, iron: 0.2, magnesium: 10, zinc: 0.1, potassium: 168, phosphorus: 14, selenium: 0.6, copper: 0.11, manganese: 0.06, omega3: 0.04, omega6: 0.02, fiber: 1.6 }},
      { id: 'kiwi', name: 'Kiwi', category: 'fruits', emoji: 'ü•ù', serving: '100g',
        nutrients: { calories: 61, protein: 1.1, carbs: 14.7, fat: 0.5, histidine: 0.03, isoleucine: 0.05, leucine: 0.07, lysine: 0.06, methionine: 0.02, phenylalanine: 0.04, threonine: 0.05, tryptophan: 0.02, valine: 0.06, vitaminA: 4, vitaminC: 92.7, vitaminK: 40.3, vitaminB6: 0.06, folate: 25, vitaminE: 1.46, thiamin: 0.03, riboflavin: 0.03, niacin: 0.34, calcium: 34, iron: 0.3, magnesium: 17, zinc: 0.1, potassium: 312, phosphorus: 34, selenium: 0.2, copper: 0.13, manganese: 0.1, omega3: 0.04, omega6: 0.25, fiber: 3.0 }},
      { id: 'dates', name: 'Dates (medjool)', category: 'fruits', emoji: 'üå¥', serving: '100g',
        nutrients: { calories: 277, protein: 1.8, carbs: 75, fat: 0.2, histidine: 0.03, isoleucine: 0.04, leucine: 0.06, lysine: 0.05, methionine: 0.02, phenylalanine: 0.05, threonine: 0.04, tryptophan: 0.01, valine: 0.05, vitaminA: 7, vitaminC: 0.4, vitaminK: 2.7, vitaminB6: 0.25, folate: 15, vitaminE: 0.05, thiamin: 0.05, riboflavin: 0.06, niacin: 1.61, calcium: 64, iron: 0.9, magnesium: 54, zinc: 0.4, potassium: 696, phosphorus: 62, selenium: 3, copper: 0.36, manganese: 0.3, omega3: 0, omega6: 0.01, fiber: 6.7 }},
      { id: 'apple', name: 'Apple', category: 'fruits', emoji: 'üçé', serving: '100g',
        nutrients: { calories: 52, protein: 0.3, carbs: 13.8, fat: 0.2, histidine: 0, isoleucine: 0.01, leucine: 0.01, lysine: 0.01, methionine: 0, phenylalanine: 0.01, threonine: 0.01, tryptophan: 0, valine: 0.01, vitaminA: 3, vitaminC: 4.6, vitaminK: 2.2, vitaminB6: 0.04, folate: 3, vitaminE: 0.18, thiamin: 0.02, riboflavin: 0.03, niacin: 0.09, calcium: 6, iron: 0.1, magnesium: 5, zinc: 0, potassium: 107, phosphorus: 11, selenium: 0, copper: 0.03, manganese: 0.04, omega3: 0.01, omega6: 0.04, fiber: 2.4 }},
      { id: 'grapes', name: 'Grapes (red)', category: 'fruits', emoji: 'üçá', serving: '100g',
        nutrients: { calories: 69, protein: 0.7, carbs: 18.1, fat: 0.2, histidine: 0.01, isoleucine: 0.01, leucine: 0.01, lysine: 0.01, methionine: 0.01, phenylalanine: 0.01, threonine: 0.01, tryptophan: 0, valine: 0.02, vitaminA: 3, vitaminC: 3.2, vitaminK: 14.6, vitaminB6: 0.09, folate: 2, vitaminE: 0.19, thiamin: 0.07, riboflavin: 0.07, niacin: 0.19, calcium: 10, iron: 0.4, magnesium: 7, zinc: 0.1, potassium: 191, phosphorus: 20, selenium: 0.1, copper: 0.13, manganese: 0.07, omega3: 0.01, omega6: 0.04, fiber: 0.9 }},
      { id: 'pineapple', name: 'Pineapple', category: 'fruits', emoji: 'üçç', serving: '100g',
        nutrients: { calories: 50, protein: 0.5, carbs: 13.1, fat: 0.1, histidine: 0.01, isoleucine: 0.02, leucine: 0.02, lysine: 0.03, methionine: 0.01, phenylalanine: 0.02, threonine: 0.02, tryptophan: 0.01, valine: 0.02, vitaminA: 3, vitaminC: 47.8, vitaminK: 0.7, vitaminB6: 0.11, folate: 18, vitaminE: 0.02, thiamin: 0.08, riboflavin: 0.03, niacin: 0.5, calcium: 13, iron: 0.3, magnesium: 12, zinc: 0.1, potassium: 109, phosphorus: 8, selenium: 0.1, copper: 0.11, manganese: 0.93, omega3: 0.02, omega6: 0.01, fiber: 1.4 }},

      // === FERMENTED ===
      { id: 'sauerkraut', name: 'Sauerkraut', category: 'fermented', emoji: 'ü•¨', serving: '100g',
        nutrients: { calories: 19, protein: 0.9, carbs: 4.3, fat: 0.1, histidine: 0.02, isoleucine: 0.04, leucine: 0.05, lysine: 0.05, methionine: 0.01, phenylalanine: 0.03, threonine: 0.03, tryptophan: 0.01, valine: 0.04, vitaminA: 1, vitaminC: 14.7, vitaminK: 13, vitaminB6: 0.13, folate: 24, vitaminE: 0.14, thiamin: 0.02, riboflavin: 0.02, niacin: 0.14, calcium: 30, iron: 1.5, magnesium: 13, zinc: 0.2, potassium: 170, phosphorus: 20, selenium: 0.6, copper: 0.1, manganese: 0.15, omega3: 0.03, omega6: 0.04, fiber: 2.9 }},
      { id: 'kimchi', name: 'Kimchi', category: 'fermented', emoji: 'ü•¨', serving: '100g',
        nutrients: { calories: 15, protein: 1.1, carbs: 2.4, fat: 0.5, histidine: 0.02, isoleucine: 0.04, leucine: 0.05, lysine: 0.04, methionine: 0.01, phenylalanine: 0.03, threonine: 0.03, tryptophan: 0.01, valine: 0.04, vitaminA: 5, vitaminC: 0, vitaminK: 43.6, vitaminB6: 0.21, folate: 52, vitaminE: 0.11, thiamin: 0.01, riboflavin: 0.02, niacin: 0.1, calcium: 33, iron: 2.5, magnesium: 14, zinc: 0.2, potassium: 151, phosphorus: 24, selenium: 0.5, copper: 0.02, manganese: 0.16, omega3: 0.01, omega6: 0.12, fiber: 1.6 }},
      { id: 'miso', name: 'Miso Paste', category: 'fermented', emoji: 'üç∂', serving: '100g',
        nutrients: { calories: 199, protein: 12.8, carbs: 26.5, fat: 6.0, histidine: 0.31, isoleucine: 0.56, leucine: 0.89, lysine: 0.48, methionine: 0.14, phenylalanine: 0.57, threonine: 0.46, tryptophan: 0.14, valine: 0.57, vitaminA: 4, vitaminC: 0, vitaminK: 29.3, vitaminB6: 0.2, folate: 19, vitaminE: 0.01, thiamin: 0.1, riboflavin: 0.23, niacin: 0.91, calcium: 57, iron: 2.5, magnesium: 48, zinc: 2.6, potassium: 210, phosphorus: 159, selenium: 7, copper: 0.42, manganese: 0.86, omega3: 0.35, omega6: 2.88, fiber: 5.4 }},
      { id: 'natto', name: 'Natto', category: 'fermented', emoji: 'ü´ò', serving: '100g',
        nutrients: { calories: 211, protein: 17.7, carbs: 14.4, fat: 11.0, histidine: 0.48, isoleucine: 0.83, leucine: 1.37, lysine: 1.06, methionine: 0.22, phenylalanine: 0.87, threonine: 0.72, tryptophan: 0.24, valine: 0.84, vitaminA: 0, vitaminC: 13, vitaminK: 23.1, vitaminB6: 0.13, folate: 8, vitaminE: 0.01, thiamin: 0.16, riboflavin: 0.19, niacin: 0, calcium: 217, iron: 8.6, magnesium: 115, zinc: 3.0, potassium: 729, phosphorus: 174, selenium: 8.8, copper: 0.67, manganese: 1.53, omega3: 0.74, omega6: 4.31, fiber: 5.4 }},
      { id: 'soy-yogurt', name: 'Soy Yogurt', category: 'fermented', emoji: 'ü•õ', serving: '100g',
        nutrients: { calories: 54, protein: 3.5, carbs: 6.0, fat: 1.8, histidine: 0.08, isoleucine: 0.14, leucine: 0.23, lysine: 0.19, methionine: 0.04, phenylalanine: 0.15, threonine: 0.12, tryptophan: 0.04, valine: 0.14, vitaminA: 0, vitaminC: 0, vitaminK: 0, vitaminB6: 0.04, folate: 20, vitaminE: 0, thiamin: 0.04, riboflavin: 0.03, niacin: 0.12, calcium: 118, iron: 0.6, magnesium: 15, zinc: 0.5, potassium: 150, phosphorus: 55, selenium: 1, copper: 0.1, manganese: 0.2, omega3: 0.1, omega6: 0.8, fiber: 0.5 }},

      // === OTHER ===
      { id: 'nutritional-yeast', name: 'Nutritional Yeast', category: 'other', emoji: '‚ú®', serving: '100g',
        nutrients: { calories: 325, protein: 50.0, carbs: 36.0, fat: 4.0, histidine: 1.1, isoleucine: 2.5, leucine: 3.5, lysine: 3.5, methionine: 0.7, phenylalanine: 2.0, threonine: 2.5, tryptophan: 0.7, valine: 2.8, vitaminA: 0, vitaminC: 0, vitaminK: 0, vitaminB6: 56.3, folate: 3125, vitaminE: 0, thiamin: 56.3, riboflavin: 56.3, niacin: 350, calcium: 25, iron: 5, magnesium: 75, zinc: 16.9, potassium: 2000, phosphorus: 1050, selenium: 45, copper: 0.6, manganese: 0.3, omega3: 0, omega6: 0, fiber: 25 }},
      { id: 'spirulina', name: 'Spirulina (dried)', category: 'other', emoji: 'üåä', serving: '100g',
        nutrients: { calories: 290, protein: 57.5, carbs: 23.9, fat: 7.7, histidine: 1.09, isoleucine: 3.21, leucine: 4.95, lysine: 3.03, methionine: 1.15, phenylalanine: 2.78, threonine: 2.97, tryptophan: 0.93, valine: 3.51, vitaminA: 29, vitaminC: 10.1, vitaminK: 25.5, vitaminB6: 0.36, folate: 94, vitaminE: 5.0, thiamin: 2.38, riboflavin: 3.67, niacin: 12.8, calcium: 120, iron: 28.5, magnesium: 195, zinc: 2.0, potassium: 1363, phosphorus: 118, selenium: 7.2, copper: 6.1, manganese: 1.9, omega3: 0.82, omega6: 1.25, fiber: 3.6 }},
      { id: 'seaweed-nori', name: 'Nori Seaweed', category: 'other', emoji: 'üåä', serving: '100g',
        nutrients: { calories: 35, protein: 5.8, carbs: 5.1, fat: 0.3, histidine: 0.09, isoleucine: 0.25, leucine: 0.47, lysine: 0.31, methionine: 0.13, phenylalanine: 0.27, threonine: 0.32, tryptophan: 0.1, valine: 0.37, vitaminA: 260, vitaminC: 39, vitaminK: 4, vitaminB6: 0.16, folate: 146, vitaminE: 1.0, thiamin: 0.12, riboflavin: 0.45, niacin: 1.47, calcium: 70, iron: 1.8, magnesium: 2, zinc: 1.1, potassium: 356, phosphorus: 58, selenium: 0.7, copper: 0.1, manganese: 0.99, omega3: 0.02, omega6: 0.1, fiber: 0.3 }},
      { id: 'fortified-plant-milk', name: 'Fortified Plant Milk', category: 'other', emoji: 'ü•õ', serving: '100g',
        nutrients: { calories: 47, protein: 3.3, carbs: 4.5, fat: 1.8, histidine: 0.08, isoleucine: 0.14, leucine: 0.23, lysine: 0.19, methionine: 0.04, phenylalanine: 0.15, threonine: 0.12, tryptophan: 0.04, valine: 0.14, vitaminA: 63, vitaminC: 0, vitaminK: 0, vitaminB6: 0.21, folate: 10, vitaminE: 0, thiamin: 0.04, riboflavin: 0.17, niacin: 0.17, calcium: 120, iron: 0.4, magnesium: 10, zinc: 0.3, potassium: 145, phosphorus: 44, selenium: 1.3, copper: 0.13, manganese: 0.1, omega3: 0.13, omega6: 1.04, fiber: 0.8 }},
      { id: 'olive-oil', name: 'Olive Oil', category: 'other', emoji: 'ü´í', serving: '100g',
        nutrients: { calories: 884, protein: 0, carbs: 0, fat: 100, histidine: 0, isoleucine: 0, leucine: 0, lysine: 0, methionine: 0, phenylalanine: 0, threonine: 0, tryptophan: 0, valine: 0, vitaminA: 0, vitaminC: 0, vitaminK: 60.2, vitaminB6: 0, folate: 0, vitaminE: 14.4, thiamin: 0, riboflavin: 0, niacin: 0, calcium: 1, iron: 0.6, magnesium: 0, zinc: 0, potassium: 1, phosphorus: 0, selenium: 0, copper: 0, manganese: 0, omega3: 0.76, omega6: 9.76, fiber: 0 }},
      { id: 'flaxseed-oil', name: 'Flaxseed Oil', category: 'other', emoji: 'ü´í', serving: '100g',
        nutrients: { calories: 884, protein: 0, carbs: 0, fat: 100, histidine: 0, isoleucine: 0, leucine: 0, lysine: 0, methionine: 0, phenylalanine: 0, threonine: 0, tryptophan: 0, valine: 0, vitaminA: 0, vitaminC: 0, vitaminK: 9.3, vitaminB6: 0, folate: 0, vitaminE: 0.47, thiamin: 0, riboflavin: 0, niacin: 0, calcium: 1, iron: 0, magnesium: 0, zinc: 0, potassium: 0, phosphorus: 1, selenium: 0, copper: 0, manganese: 0, omega3: 53.4, omega6: 12.7, fiber: 0 }},
      { id: 'cacao-powder', name: 'Cacao Powder', category: 'other', emoji: 'üç´', serving: '100g',
        nutrients: { calories: 228, protein: 19.6, carbs: 57.9, fat: 13.7, histidine: 0.17, isoleucine: 0.57, leucine: 0.89, lysine: 0.53, methionine: 0.17, phenylalanine: 0.67, threonine: 0.49, tryptophan: 0.17, valine: 0.85, vitaminA: 0, vitaminC: 0, vitaminK: 2.5, vitaminB6: 0.12, folate: 32, vitaminE: 0.1, thiamin: 0.08, riboflavin: 0.24, niacin: 2.19, calcium: 128, iron: 13.9, magnesium: 499, zinc: 6.8, potassium: 1524, phosphorus: 734, selenium: 14.3, copper: 3.79, manganese: 3.84, omega3: 0, omega6: 0.44, fiber: 33.2 }},
      { id: 'coconut-cream', name: 'Coconut Cream', category: 'other', emoji: 'ü••', serving: '100g',
        nutrients: { calories: 330, protein: 3.6, carbs: 6.7, fat: 34.7, histidine: 0.03, isoleucine: 0.06, leucine: 0.11, lysine: 0.06, methionine: 0.03, phenylalanine: 0.07, threonine: 0.05, tryptophan: 0.02, valine: 0.09, vitaminA: 0, vitaminC: 1.1, vitaminK: 0.3, vitaminB6: 0.04, folate: 16, vitaminE: 0.15, thiamin: 0.03, riboflavin: 0, niacin: 0.76, calcium: 11, iron: 3.3, magnesium: 46, zinc: 0.7, potassium: 325, phosphorus: 100, selenium: 6.2, copper: 0.27, manganese: 1.52, omega3: 0, omega6: 0.58, fiber: 2.2 }},
    ];

    // ============================================
    // DAILY VALUES (Base - modified by personalization)
    // ============================================
    var baseDailyValues = {
      calories: 2000, protein: 50, carbs: 300, fat: 65,
      histidine: 0.7, isoleucine: 1.4, leucine: 2.73, lysine: 2.1,
      methionine: 0.73, phenylalanine: 1.75, threonine: 1.05, tryptophan: 0.28, valine: 1.82,
      vitaminA: 900, vitaminC: 90, vitaminK: 120, vitaminB6: 1.3, folate: 400,
      vitaminE: 15, thiamin: 1.2, riboflavin: 1.3, niacin: 16,
      calcium: 1000, iron: 18, magnesium: 400, zinc: 11, potassium: 4700,
      phosphorus: 700, selenium: 55, copper: 0.9, manganese: 2.3,
      omega3: 1.6, omega6: 17, fiber: 28
    };

    let dailyValues = { ...baseDailyValues };

    // ============================================
    // UPPER TOLERABLE LIMITS (UL) for overdose warnings
    // ============================================
    var upperLimits = {
      vitaminA: 3000,    // mcg (retinol equiv) ‚Äî can cause liver damage
      vitaminC: 2000,    // mg ‚Äî GI distress
      vitaminE: 1000,    // mg ‚Äî bleeding risk
      vitaminB6: 100,    // mg ‚Äî nerve damage
      folate: 1000,      // mcg ‚Äî masks B12 deficiency
      niacin: 35,        // mg ‚Äî flushing
      calcium: 2500,     // mg ‚Äî kidney stones, heart issues
      iron: 45,          // mg ‚Äî GI distress, organ damage
      magnesium: 350,    // mg (supplement form) ‚Äî diarrhea
      zinc: 40,          // mg ‚Äî copper deficiency
      selenium: 400,     // mcg ‚Äî selenosis
      copper: 10,        // mg ‚Äî liver damage
      manganese: 11,     // mg ‚Äî neurological issues
      phosphorus: 4000,  // mg ‚Äî kidney issues
    };

    var upperLimitNames = {
      en: {
        vitaminA: 'Vitamin A', vitaminC: 'Vitamin C', vitaminE: 'Vitamin E',
        vitaminB6: 'Vitamin B6', folate: 'Folate', niacin: 'Niacin',
        calcium: 'Calcium', iron: 'Iron', magnesium: 'Magnesium',
        zinc: 'Zinc', selenium: 'Selenium', copper: 'Copper',
        manganese: 'Manganese', phosphorus: 'Phosphorus'
      },
      pt: {
        vitaminA: 'Vitamina A', vitaminC: 'Vitamina C', vitaminE: 'Vitamina E',
        vitaminB6: 'Vitamina B6', folate: 'Folato', niacin: 'Niacina',
        calcium: 'C√°lcio', iron: 'Ferro', magnesium: 'Magn√©sio',
        zinc: 'Zinco', selenium: 'Sel√©nio', copper: 'Cobre',
        manganese: 'Mangan√™s', phosphorus: 'F√≥sforo'
      }
    };

    // ============================================
    // MEAL PRESETS
    // ============================================
    var mealPresets = {
      'buddha-bowl': {
        name: { en: 'Buddha Bowl', pt: 'Buddha Bowl' },
        items: [
          { id: 'quinoa', serving: 1.5 },
          { id: 'chickpeas', serving: 1 },
          { id: 'avocado', serving: 0.5 },
          { id: 'spinach', serving: 1 },
          { id: 'tahini', serving: 0.3 },
          { id: 'bell-pepper-red', serving: 0.5 }
        ]
      },
      'power-smoothie': {
        name: { en: 'Power Smoothie', pt: 'Smoothie Energ√©tico' },
        items: [
          { id: 'banana', serving: 1.5 },
          { id: 'blueberries', serving: 1 },
          { id: 'spinach', serving: 0.5 },
          { id: 'chia-seeds', serving: 0.2 },
          { id: 'fortified-plant-milk', serving: 2.5 },
          { id: 'dates', serving: 0.3 }
        ]
      },
      'protein-plate': {
        name: { en: 'Protein Plate', pt: 'Prato Proteico' },
        items: [
          { id: 'tofu', serving: 1.5 },
          { id: 'brown-rice', serving: 1.5 },
          { id: 'broccoli', serving: 1 },
          { id: 'pumpkin-seeds', serving: 0.3 },
          { id: 'nutritional-yeast', serving: 0.1 }
        ]
      },
      'mediterranean': {
        name: { en: 'Mediterranean', pt: 'Mediterr√¢neo' },
        items: [
          { id: 'chickpeas', serving: 1 },
          { id: 'tahini', serving: 0.3 },
          { id: 'tomatoes', serving: 1 },
          { id: 'olive-oil', serving: 0.15 },
          { id: 'kale', serving: 0.5 },
          { id: 'lentils', serving: 0.75 }
        ]
      },
      'asian-bowl': {
        name: { en: 'Asian Bowl', pt: 'Bowl Asi√°tico' },
        items: [
          { id: 'tofu', serving: 1 },
          { id: 'brown-rice', serving: 1.5 },
          { id: 'edamame', serving: 0.75 },
          { id: 'mushrooms', serving: 0.5 },
          { id: 'sesame-seeds', serving: 0.1 },
          { id: 'seaweed-nori', serving: 0.05 }
        ]
      }
    };
</script>

<!-- Load the engine -->
<script src="../assets/js/nutrition-calculator.js"></script>

</body>
</html>
